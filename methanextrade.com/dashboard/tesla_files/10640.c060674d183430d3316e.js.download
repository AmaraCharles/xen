"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[10640],{95370:(t,e,i)=>{i.d(e,{PanePriceAxisView:()=>a});var n=i(5486);class l{constructor(t){this._priceAxisViewRenderer=null,this._rendererOptions=null,this._align="right",this._textWidthCache=t}setParams(t,e,i,n,l){this._priceAxisViewRenderer=t,this._rendererOptions=e,this._align=l}draw(t,e){null!==this._rendererOptions&&null!==this._priceAxisViewRenderer&&this._priceAxisViewRenderer.draw(t,e,this._rendererOptions,this._textWidthCache,this._align)}hitTest(t,e){var i,n;return void 0===(null===(i=this._priceAxisViewRenderer)||void 0===i?void 0:i.hitTest)?null:null===(n=this._priceAxisViewRenderer)||void 0===n?void 0:n.hitTest(t,e,this._align)}}class a{constructor(t,e,i){this._renderer=null,this._invalidated=!0,this._priceAxisView=t,this._textWidthCache=new n.TextWidthCache(100),this._dataSource=e,this._chartModel=i,this._fontSize=-1,this._panePriceAxisViewRenderer=new l(this._textWidthCache)}update(t){this._invalidated=!0}renderer(t){return this._invalidated&&this._updateImpl(t),this._renderer}_position(){const t=this._chartModel.crossHairSource(),e=this._dataSource===t?t.pane:this._chartModel.paneForSource(this._dataSource);if(null===e)return null;const i=this._priceScale();if(null===i)return null;let n=e.priceScalePosition(i);return"overlay"===n&&(n=e.priceScalePosition(e.defaultPriceScale())),"overlay"===n?null:n}_updateImpl(t){this._renderer=null;const e=this._position();if(null===e)return;const i=this._chartModel.priceAxisRendererOptions();i.fontSize!==this._fontSize&&(this._fontSize=i.fontSize,this._textWidthCache.reset()),this._panePriceAxisViewRenderer.setParams(this._priceAxisView.paneRenderer(),i,t.mediaSize.width,t.mediaSize.height,e),this._renderer=this._panePriceAxisViewRenderer,this._invalidated=!1}_priceScale(){return this._dataSource.priceScale()}}},403862:(t,e,i)=>{i.d(e,{PaneRendererArea:()=>s});var n=i(708698),l=i(286436),a=i(665798);class s extends n.PaneRendererLine{constructor(t){t.forceLineColor=!1,super(t)}_drawImpl(t){var e,i,s,r,o;const d=this._data;if(0===d.items.length)return;let h=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,c=(null!==(r=null===(s=this._data.visibleItemsRange)||void 0===s?void 0:s.endItemIndex)&&void 0!==r?r:this._data.items.length)-1;for(;h<c&&!(0,l.coordinateIsValid)(d.items[h].y);)h++;for(;c>=0&&!(0,l.coordinateIsValid)(d.items[c].y);)c--;if(h>c)return;const{context:u,horizontalPixelRatio:_,verticalPixelRatio:v}=t;u.save(),u.scale(_,v),u.lineCap="round",u.strokeStyle=d.lineColor,u.lineWidth=d.lineWidth,(0,a.setLineStyle)(u,d.lineStyle),u.lineWidth=1;const f={},m=new n.PaneRendererLineItemsIterator(this._data.items,h,c+1,this._data.skipHoles);for(;m.next();){const t=m.currentValue();let e;e=(0,n.isValidPoint)(t)&&t.style?t.style.color:d.lineColor;const i=m.nextValue();if((0,n.isValidPoint)(i)&&(null==i?void 0:i.style)){const n=i.style.color;if(e!==n){const e=f[n]||[];e.push(t),f[n]=e}}const l=f[e]||[];l.push(t),f[e]=l}
for(const t of Object.keys(f)){const e=f[t];u.beginPath();let i=0;for(let l=0;l<e.length;l++){const a=e[l];(0,n.isValidPoint)(a)&&(a.style&&(null===(o=a.style)||void 0===o?void 0:o.color)!==t&&(u.moveTo(Math.round(e[i].center),d.bottom),this._walkLine(u,e.slice(i,l),!0,d.bottom,!0),i=l))}if(u.moveTo(Math.round(e[i].center),d.bottom),this._walkLine(u,e.slice(i,e.length),!0,d.bottom,!0),u.closePath(),d.isSeries){const t=u.createLinearGradient(0,0,0,d.bottom);t.addColorStop(0,d.color1),t.addColorStop(1,d.color2),u.fillStyle=t,d.simpleMode=!0}else u.fillStyle=t;u.fill()}u.lineWidth=d.lineWidth,u.restore(),super._drawImpl(t)}}},708698:(t,e,i)=>{i.d(e,{PaneRendererLine:()=>_,PaneRendererLineItemsIterator:()=>u,isValidPoint:()=>c});var n=i(650151),l=i(86441),a=i(204652),s=i(509078),r=i(286436),o=i(665798),d=i(961970);const h={y:NaN};function c(t){return null!==t&&!isNaN(t.y)}class u{constructor(t,e,i,l){this._calculatedPrev={index:null,currentBreakProcessed:!1,value:null},this._calculatedCurrent={index:null,currentBreakProcessed:!1,value:null},this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},this._preallocatedVariable={index:null,currentBreakProcessed:!1,value:null},t.length&&((0,n.assert)(e<=i,"First index must be less or equal to last index"),(0,n.assert)(e<t.length,"First index must be less then array length"),(0,n.assert)(i<=t.length,"Last index must be less or equal to array length")),this._items=t,this._firstIndexWithRange=e,this._lastIndexWithRange=i,this._skipHoles=l}next(){if(0===this._items.length)return!1;if(null!==this._calculatedNext.index)return null!==this._calculatedNext.value&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._calculatedNext,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null},!0);let t;this._preallocatedVariable={...this._calculatedCurrent};do{null===this._preallocatedVariable.index?(this._preallocatedVariable.index=this._firstIndexWithRange,this._preallocatedVariable.currentBreakProcessed=!1,t=this._preallocatedVariable.index<this._lastIndexWithRange):(this._incrementPointer(this._preallocatedVariable),t=this._isValidPointer(this._preallocatedVariable)),t&&this._calcVaue(this._preallocatedVariable)}while(t&&this._skipHoles&&!c(this._preallocatedVariable.value));return t&&(this._calculatedPrev=this._calculatedCurrent,this._calculatedCurrent=this._preallocatedVariable,this._calculatedNext={index:null,currentBreakProcessed:!1,value:null}),t}prevValue(){return this._calculatedPrev.value}currentValue(){return(0,n.ensureNotNull)(this._calculatedCurrent.value)}currentValueIsLast(){return(0,n.ensureNotNull)(this._calculatedCurrent.index)===this._items.length-1}currentValueIsFirst(){return 0===(0,n.ensureNotNull)(this._calculatedCurrent.index)}nextValue(){if(null!==this._calculatedNext.index)return this._calculatedNext.value;let t;this._calculatedNext={...this._calculatedCurrent,value:null};do{this._incrementPointer(this._calculatedNext),t=this._isValidPointer(this._calculatedNext),
t?this._calcVaue(this._calculatedNext):this._calculatedNext.value=null}while(t&&this._skipHoles&&!c(this._calculatedNext.value));return this._calculatedNext.value}atStart(){return this._calculatedCurrent.index===this._firstIndexWithRange&&!this._calculatedCurrent.currentBreakProcessed}atEnd(){const t=(0,n.ensureNotNull)(this._calculatedCurrent.index);return t<this._lastIndexWithRange&&(this._calculatedCurrent.currentBreakProcessed||!this._needBreakBefore(t))}_needBreakBefore(t){return!!this._items[t].breakBefore&&!this._skipHoles}_calcVaue(t){const e=(0,n.ensureNotNull)(t.index);this._needBreakBefore(e)&&!t.currentBreakProcessed?t.value=h:t.value=this._items[e]}_incrementPointer(t){const e=(0,n.ensureNotNull)(t.index);this._needBreakBefore(e)&&!this._calculatedCurrent.currentBreakProcessed?t.currentBreakProcessed=!0:(t.index=e+1,t.currentBreakProcessed=!1)}_isValidPointer(t){const e=(0,n.ensureNotNull)(t.index);return e<this._lastIndexWithRange||e===this._lastIndexWithRange-1&&this._needBreakBefore(e)&&t.currentBreakProcessed}}class _ extends d.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=t}hitTest(t){var e,i,n,o;const d=(0,r.interactionTolerance)().series+this._data.lineWidth/2;let h=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,c=(null!==(o=null===(n=this._data.visibleItemsRange)||void 0===n?void 0:n.endItemIndex)&&void 0!==o?o:this._data.items.length)-1;for(;c-h>2;){const e=Math.round((c+h)/2);this._data.items[e].center<=t.x?h=e:c=e}h=Math.max(1,h-1),c=Math.min(this._data.items.length-1,c+1);for(let e=h;e<=c;++e){const i=this._data.items[e-1],n=this._data.items[e],r=i.center,o=n.center;if((0,a.distanceToSegment)(new l.Point(r,i.y),new l.Point(o,n.y),new l.Point(t.x,t.y)).distance<=d)return this._data.hittest?this._data.hittest:new s.HitTestResult(s.HitTarget.Regular)}return null}_drawImpl(t){const{context:e,horizontalPixelRatio:i,verticalPixelRatio:n}=t;e.scale(i,n),e.lineCap="round",e.lineJoin="round",e.strokeStyle=this._data.lineColor,e.fillStyle=this._data.lineColor,e.lineWidth=this._data.lineWidth,(0,o.setLineStyle)(e,this._data.lineStyle),(0,r.setValidLineStyle)(e,this._data.lineStyle),this._data.simpleMode?this._drawSimpleMode(e,i,n):this._drawLines(e)}_drawSimpleMode(t,e,i){var n,l,a,s;t.beginPath(),this._walkLine(t,this._data.items,!1,NaN),t.stroke();const r=this._data.lineWidth+2;if(this._data.withMarkers&&2*r<this._data.barSpacing){t.scale(1/e,1/i);const o=Math.max(1,Math.floor(e))%2/2,d=r*i+o,h=2*Math.PI;t.beginPath();const c=null!==(l=null===(n=this._data.visibleItemsRange)||void 0===n?void 0:n.startItemIndex)&&void 0!==l?l:0;for(let n=(null!==(s=null===(a=this._data.visibleItemsRange)||void 0===a?void 0:a.endItemIndex)&&void 0!==s?s:this._data.items.length)-1+1;n-- >=c;){const l=this._data.items[n];if(l){const n=Math.round(l.center*e)+o,a=l.y*i;t.moveTo(n,a),t.arc(n,a,d,0,h)}}t.fill()}}_walkLine(t,e,i,n,l){var a,s,r,o;if(!e)return;const d=.25*this._data.barSpacing;let h,_,v=null
;const f=l?0:null!==(s=null===(a=this._data.visibleItemsRange)||void 0===a?void 0:a.startItemIndex)&&void 0!==s?s:0,m=l?e.length:Math.min(null!==(o=null===(r=this._data.visibleItemsRange)||void 0===r?void 0:r.endItemIndex)&&void 0!==o?o:e.length,e.length);if(f>m||f>=e.length)return;const p=new u(e,f,m,this._data.skipHoles);for(;p.next();){if(h=p.currentValue(),_=p.nextValue(),c(h)){const e=Math.round(h.center);v&&c(v)?(t.lineTo(e,h.y),i&&!c(_)&&t.lineTo(e,n)):_&&c(_)?i?(p.atStart()||t.lineTo(e,n),t.lineTo(e,h.y)):t.moveTo(e,h.y):i?(p.atStart()||t.lineTo(e-d,n),t.lineTo(e-d,h.y),t.lineTo(e+d,h.y),t.lineTo(e+d,n)):(t.moveTo(e-d,h.y),t.lineTo(e+d,h.y))}v=h}}_drawLines(t){var e,i,n,l;if(!this._data.items.length)return;let a,s,o=null;const d=.25*this._data.barSpacing;t.beginPath();const h=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,_=null!==(l=null===(n=this._data.visibleItemsRange)||void 0===n?void 0:n.endItemIndex)&&void 0!==l?l:this._data.items.length;if(h>_||h>=this._data.items.length)return;const v=this._data.items[h];v&&t.moveTo(v.center,v.y);let f,m=t.strokeStyle,p=t.lineWidth;const x=new u(this._data.items,h,_,this._data.skipHoles);for(;x.next();){let e,i,n;o=x.prevValue(),a=x.currentValue(),s=x.nextValue();let l=!1;if(c(a)&&(a.style&&!this._data.forceLineColor?(e=a.style.color,i=a.style.width,n=a.style.style):(e=this._data.lineColor,i=this._data.lineWidth,n=this._data.lineStyle),this._data.ignorePaletteLineWidth&&(i=this._data.lineWidth),l=e!==m||i!==p||n!==f),l)if(m=e,p=i,f=n,t.stroke(),t.beginPath(),t.strokeStyle=e,t.lineWidth=i,(0,r.setValidLineStyle)(t,n),c(o))t.moveTo(o.center,o.y);else{const e=a;t.moveTo(e.center,e.y)}g=o,I=s,c(y=a)&&(c(g)?t.lineTo(y.center,y.y):I&&c(I)?t.moveTo(y.center,y.y):(t.moveTo(y.center-d,y.y),t.lineTo(y.center+d,y.y)))}var g,y,I;t.stroke()}}},810873:(t,e,i)=>{i.d(e,{PaneRendererStepLine:()=>m,StepLineDecoration:()=>n});var n,l=i(204652),a=i(86441),s=i(432059),r=i(509078),o=i(286436),d=i(665798),h=i(961970),c=i(708698);!function(t){t[t.None=0]="None",t[t.Diamonds=1]="Diamonds"}(n||(n={}));class u{constructor(t){this._forceExtendFirstBar=!!t}initialize(t,e,i){var n,l,a,s;const{context:r,horizontalPixelRatio:o,verticalPixelRatio:h}=e,c=t.lineStyle;r.lineCap="butt",r.lineJoin="round";const u=Math.max(Math.floor(null!==(l=null===(n=i.style)||void 0===n?void 0:n.width)&&void 0!==l?l:t.lineWidth*o));void 0!==c&&(0,d.setLineStyle)(r,c);const _=u%2?.5:0;r.moveTo(Math.round(i.center*o)+_,Math.round(i.y*h)+_),r.strokeStyle=null!==(s=null===(a=i.style)||void 0===a?void 0:a.color)&&void 0!==s?s:t.lineColor,r.lineWidth=u}startFragment(t,e,i,n){t.beginPath();const l=i.firstItem&&i.extendToBarsEndings?e.center:e.left;t.moveTo(isNaN(l)?-50:l,e.y)}finishFragment(t,e,i){e&&i&&t.lineTo(e.left,i.y),t.stroke()}hitTest(t,e,i,n){var s,r;if(!(0,c.isValidPoint)(e))return!1;const d=null!==(r=null===(s=e.style)||void 0===s?void 0:s.width)&&void 0!==r?r:t.lineWidth,h=(0,o.interactionTolerance)().series+d/2,{left:u,y:_}=e,v=isNaN(u)?-50:u;let f,m
;return i&&(0,c.isValidPoint)(i)?(f=i.left,m=i.y):(f=e.right,m=e.y),!(v<n.x-h&&f<n.x-h||v>n.x+h&&f>n.x+h)&&((0,l.distanceToSegment)((0,a.point)(v,_),(0,a.point)(f,_),n).distance<h||_!==m&&(0,l.distanceToSegment)((0,a.point)(f,_),(0,a.point)(f,m),n).distance<h)}applyColor(t,e){t.strokeStyle=e}applyLineWidth(t,e){t.lineWidth=e}drawItem(t,e,i,n){const l=t.context;void 0!==n&&l.lineTo(e.left,n.y),l.lineTo(!i.firstItem||i.extendToBarsEndings||this._forceExtendFirstBar?e.left:e.center,e.y),l.lineTo(i.lastItem&&!i.extendToBarsEndings?e.center:e.right,e.y)}}class _{constructor(){this._lineWidth=1}initialize(t,e,i){var n,l,a,s;const{context:r,horizontalPixelRatio:o}=e;this.applyColor(r,null!==(l=null===(n=i.style)||void 0===n?void 0:n.color)&&void 0!==l?l:t.lineColor),this._lineWidth=Math.max(Math.floor(null!==(s=null===(a=i.style)||void 0===a?void 0:a.width)&&void 0!==s?s:t.lineWidth*o))}startFragment(t,e,i,n){t.beginPath()}finishFragment(t){t.fill()}drawItem(t,e,i,n){if(i.valIsNotSameAsPrev&&!isNaN(e.left)){const i=t.context;i.save(),i.translate(e.left,e.y),i.rotate(Math.PI/4);const n=this._scaleByLineWidth(this._lineWidth);i.scale(n,n),this._drawItemRotatedAndTranslated(t),i.restore()}}applyLineWidth(t,e){this._lineWidth=e}hitTest(t,e,i,n){var l,s;if(!e.valIsNotSameAsPrev)return!1;const r=n.subtract((0,a.point)(e.left,e.y));return this._hitTestTranslated(r,null!==(s=null===(l=e.style)||void 0===l?void 0:l.width)&&void 0!==s?s:t.lineWidth)}_scaleByLineWidth(t){return Math.sqrt(t)}}class v extends _{applyColor(t,e){t.fillStyle=e}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<8*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,d.drawRoundRect)(t.context,-4,-4,8,8,2,!0)}}class f extends _{applyColor(t,e){t.fillStyle=(0,s.applyTransparency)(e,85)}_hitTestTranslated(t,e){return Math.abs(t.x)+Math.abs(t.y)<21*this._scaleByLineWidth(e)/2}_drawItemRotatedAndTranslated(t){(0,d.drawRoundRect)(t.context,-10.5,-10.5,21,21,5,!0)}}class m extends h.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._data=null!=t?t:null}setData(t){this._data=t}hitTest(t){var e,i;const l=this._data;if(null===l||0===l.items.length)return null;const{items:a,visibleItemsRange:s,skipHoles:o}=l,d=null!==(e=null==s?void 0:s.startItemIndex)&&void 0!==e?e:0,h=null!==(i=null==s?void 0:s.endItemIndex)&&void 0!==i?i:a.length;if(h<=d)return null;const _=l.decoration===n.Diamonds?[new u,new f]:[new u];const v=new c.PaneRendererLineItemsIterator(a,d,h,o);for(;v.next();){const e=v.currentValue(),i=v.nextValue();for(const n of _)if((0,c.isValidPoint)(e)&&n.hitTest(l,e,(0,c.isValidPoint)(i)?i:null,t))return new r.HitTestResult(r.HitTarget.Regular)}return null}_drawImpl(t){if(null===this._data||0===this._data.items.length)return;(this._data.decoration===n.Diamonds?[new u(!0),new v,new f]:[new u]).forEach((e=>this._drawDecorationItem(t,e)))}_drawDecorationItem(t,e){var i,n,l,a,s,r,o,d,h,u;if(null===this._data||0===this._data.items.length)return
;const{lineWidth:_,lineColor:v,items:f,visibleItemsRange:m,skipHoles:p,extendToBarsEndings:x}=this._data,{context:g,horizontalPixelRatio:y,verticalPixelRatio:I}=t;let P=Math.max(Math.floor((null!==(n=null===(i=f[0].style)||void 0===i?void 0:i.width)&&void 0!==n?n:_)*y)),C=P%2?.5:0;e.initialize(this._data,t,f[0]);const w=null!==(l=null==m?void 0:m.startItemIndex)&&void 0!==l?l:0,S=null!==(a=null==m?void 0:m.endItemIndex)&&void 0!==a?a:f.length;if(S<=w)return;let b,R,T;g.beginPath(),e.applyColor(g,null!==(r=null===(s=f[w].style)||void 0===s?void 0:s.color)&&void 0!==r?r:v),e.applyLineWidth(g,P);let M=!1;const B=new c.PaneRendererLineItemsIterator(f,w,S,p);for(;B.next();){const i=B.currentValue();if(!(0,c.isValidPoint)(i)){b=void 0,M=!0;continue}const n=null!==(d=null===(o=i.style)||void 0===o?void 0:o.color)&&void 0!==d?d:v,l=null!==(u=null===(h=i.style)||void 0===h?void 0:h.width)&&void 0!==u?u:_,a=n!==R,s=l!==T,r={firstItem:B.currentValueIsFirst(),lastItem:B.currentValueIsLast(),extendToBarsEndings:x,valIsNotSameAsPrev:i.valIsNotSameAsPrev},f={y:Math.round(i.y*I)+C,left:Math.round(i.left*y)+C,center:Math.round(i.center*y)+C,right:Math.round(i.right*y)+C};(a||s||M)&&(R&&T&&e.finishFragment(g,f,b),a&&e.applyColor(g,n),s&&(P=Math.max(1,Math.floor(l*y)),C=P%2?.5:0,e.applyLineWidth(g,P)),e.startFragment(g,f,r,b),M=!1,R=n,T=l),e.drawItem(t,f,r,b),b=f}e.finishFragment(g)}}},836687:(t,e,i)=>{i.d(e,{SelectionIndexes:()=>l});var n=i(650151);class l{constructor(t){this._baseIndex=null,this._offsetInBar=null,this._offsetInTime=null,this._barsBetweenPoints=null,this._timescale=t}indexes(){const t=this._timescale.visibleBarsStrictRange();if(null===t)return[];const e=t.firstBar(),i=t.lastBar();if(null===this._offsetInTime||null===this._barsBetweenPoints){const t=this._timescale.barSpacing();this._barsBetweenPoints=Math.floor(120/t),this._offsetInBar=i%this._barsBetweenPoints,this._offsetInTime=this._timescale.indexToTimePoint(this._offsetInBar),this._baseIndex=this._timescale.baseIndex()}const l=this._timescale.baseIndex();this._baseIndex!==l&&(this._baseIndex=l,this._offsetInBar=(0,n.ensureNotNull)(this._timescale.timePointToIndex(this._offsetInTime)));const a=(0,n.ensureNotNull)(this._offsetInBar),s=[];let r=Math.floor((e-a)/this._barsBetweenPoints);const o=Math.floor((i-a)/this._barsBetweenPoints);for(;r<=o;r++)s.push(a+r*this._barsBetweenPoints);return s}clear(){this._offsetInBar=null,this._offsetInTime=null,this._baseIndex=null,this._barsBetweenPoints=null}}},112377:(t,e,i)=>{i.d(e,{SelectionRenderer:()=>d});var n=i(934026),l=i(960095),a=i(509078),s=i(86e3),r=i(961970);const o=l.colorsPalette["color-tv-blue-600"];class d extends r.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=t||null}setData(t){this._data=t}hitTest(t){var e;if(!this._data||!this._data.visible)return null;for(let i=0;i<this._data.points.length;i++){const n=this._data.points[i];if(n.point.subtract(t).length()<=5.5)return new a.HitTestResult(this._data.hittestResult,{pointIndex:n.pointIndex,
cursorType:null!==(e=n.cursorType)&&void 0!==e?e:s.PaneCursorType.Default})}return null}doesIntersectWithBox(t){return!!this._data&&this._data.points.some((e=>(0,n.pointInBox)(e.point,t)))}_drawImpl(t){if(null===this._data||!this._data.visible)return;const{context:e,horizontalPixelRatio:i}=t;e.strokeStyle=void 0!==this._data.color?this._data.color:o,e.lineCap="butt";const n=Math.max(1,Math.floor(i));e.lineWidth=n;const l=this._data.vertOffset||0;for(let i=0;i<this._data.points.length;++i){const s=this._data.points[i];(a=s.point,Number.isFinite(a.x)&&Number.isFinite(a.y))&&(e.fillStyle=this._data.bgColors[i],this._drawMarker(t,{center:s.point.x,y:s.point.y},l,n))}var a}_drawMarker(t,e,i,n){const{context:l,horizontalPixelRatio:a,verticalPixelRatio:s}=t;let r=Math.round(3.5*a*2);r%2!=n%2&&(r+=1);let o=Math.round(r+2*(.5*n+.75*a));o%2!=n%2&&(o+=1);const d=Math.round(e.center*a),h=Math.round((e.y+i)*s),c=n%2/2;l.beginPath(),l.arc(d+c,h+c,o/2,0,2*Math.PI,!0),l.closePath(),l.fill(),l.beginPath(),l.arc(d+c,h+c,r/2,0,2*Math.PI,!0),l.closePath(),l.stroke()}}},40563:(t,e,i)=>{function n(t){t.lineWidth=void 0,t.lineStyle=void 0;for(let e=0;e<t.colors.length;e++)t.colors[e]=void 0;return t}function l(){return{colors:[void 0,void 0,void 0,void 0,void 0,void 0,void 0],lineWidth:void 0,lineStyle:void 0}}i.d(e,{clearStyle:()=>n,createEmptyStyle:()=>l})},559678:(t,e,i)=>{i.d(e,{PaneRendererColumns:()=>a});var n=i(961970),l=i(509078);class a extends n.BitmapCoordinatesPaneRenderer{constructor(t){super(),this._data=null,this._precalculatedCache=[],this.setData(t)}setData(t){this._data=t,this._precalculatedCache=[]}hitTest(t){var e,i,n,a;if(null===this._data)return null;const s=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,r=(null!==(a=null===(n=this._data.visibleItemsRange)||void 0===n?void 0:n.endItemIndex)&&void 0!==a?a:this._data.items.length)-1;for(let e=s;e<=r;e++){const i=this._data.items[e];if(t.x>=i.left&&t.x<=i.right){const e=i.y;if(t.y>=Math.min(e,this._data.histogramBase)&&t.y<=Math.max(e,this._data.histogramBase))return new l.HitTestResult(l.HitTarget.Regular)}}return null}_drawImpl(t){var e,i,n,l;if(null===this._data||0===this._data.items.length)return;const{context:a,horizontalPixelRatio:s,verticalPixelRatio:r}=t;this._precalculatedCache.length||this._fillPrecalculatedCache(s);const o=Math.max(1,Math.floor(s)),d=Math.max(1,Math.floor(r)),h=Math.round(this._data.histogramBase*r)-Math.floor(o/2),c=h+o,u=this._data.lineColor,_=null!==(i=null===(e=this._data.visibleItemsRange)||void 0===e?void 0:e.startItemIndex)&&void 0!==i?i:0,v=(null!==(l=null===(n=this._data.visibleItemsRange)||void 0===n?void 0:n.endItemIndex)&&void 0!==l?l:this._data.items.length)-1;for(let t=_;t<=v;t++){const e=this._data.items[t],i=this._precalculatedCache[t-_],n=Math.round(e.y*r);let l,s;a.fillStyle=e.style?e.style.color:u,n<=h?(l=n,s=c):(l=h,s=n-Math.floor(d/2)+d),a.fillRect(i.left,l,i.right-i.left+1,s-l)}}_fillPrecalculatedCache(t){var e,i
;if(null===this._data||0===this._data.items.length)return void(this._precalculatedCache=[]);const{barSpacing:n,visibleItemsRange:l,items:a}=this._data,s=Math.ceil(n*t)<=1?0:Math.max(1,Math.floor(t)),r=null!==(e=null==l?void 0:l.startItemIndex)&&void 0!==e?e:0,o=(null!==(i=null==l?void 0:l.endItemIndex)&&void 0!==i?i:a.length)-1,d=o-r+1;if(d<=0)return void(this._precalculatedCache=[]);this._precalculatedCache=new Array(d);for(let e=r;e<=o;e++){const i=a[e],n=Math.round(i.center*t);let l,o;const d=Math.round((i.right-i.left)*t)-s;if(d%2){const t=(d-1)/2;l=n-t,o=n+t}else{const t=d/2;l=n-t,o=n+t-1}this._precalculatedCache[e-r]={left:l,right:o,roundedCenter:n,center:i.center*t,time:i.timePointIndex}}for(let t=r+1;t<=o;t++){const e=this._precalculatedCache[t-r],i=this._precalculatedCache[t-r-1];e.time===i.time+1&&(e.left-i.right!==s+1&&(i.roundedCenter>i.center?i.right=e.left-s-1:e.left=i.right+s+1))}let h=Math.ceil(n*t);for(let t=r+1;t<=o;t++){const e=this._precalculatedCache[t-r];e.right<e.left&&(e.right=e.left);const i=e.right-e.left+1;h=Math.min(i,h)}if(s>0&&h<4)for(let t=r+1;t<=o;t++){const e=this._precalculatedCache[t-r];e.right-e.left+1>h&&(e.roundedCenter>e.center?e.right-=1:e.left+=1)}}}},962973:(t,e,i)=>{i.d(e,{createStudyPlotColorProvider:()=>_});var n=i(748947),l=i(650151),a=i(40563);const s=new Map([[0,"color"],[2,"textColor"],[3,"borderColor"],[4,"wickColor"],[5,"colorup"],[6,"colordown"]]);class r{constructor(t){this._plotStyle=t}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return s.forEach(((t,e)=>{this._plotStyle[t]&&(i.colors[e]=this._plotStyle[t].value())})),i.lineWidth=this._plotStyle.linewidth?this._plotStyle.linewidth.value():void 0,i.lineStyle=this._plotStyle.linestyle?this._plotStyle.linestyle.value():void 0,i}isColorDefined(){return!0}singleColor(){return!0}getDefaultPlotPointStyle(){return null}}const o=[0,1,2,3,4,5,6];class d{constructor(t,e,i,n){this._palettesColors=new Map,this._defaultPlotColors=new Map,this._indexes=n;const a=e.styles[i];if(a)for(const[t,e]of s)this._defaultPlotColors.set(t,a[e]);const r=(0,l.ensureDefined)(t.palettes),o=t.plots;n.forEach(((t,i)=>{const n=o[t];if(n&&"palette"in n){const t=r[n.palette],l=e.palettes[n.palette];if(t&&l){const{valToIndex:e}=t,{colors:n}=l,a={...n};e&&Object.keys(e).forEach((t=>{const i=e[t];void 0!==i&&(a[t]=n[i])})),this._palettesColors.set(i,a)}}}))}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return o.forEach((e=>{var n,a;if(this._palettesColors.has(e)){const a=t[(0,l.ensureDefined)(this._indexes.get(e))+1];if("number"==typeof a){const t=null===(n=this._palettesColors.get(e))||void 0===n?void 0:n[a];0===e&&t&&(i.lineWidth=t.width.value(),i.lineStyle=t.style.value()),i.colors[e]=null==t?void 0:t.color.value()}else i.colors[e]="transparent"}else i.colors[e]=null===(a=this._defaultPlotColors.get(e))||void 0===a?void 0:a.value()})),i}getDefaultPlotPointStyle(){var t;const e=null===(t=this._palettesColors.get(0))||void 0===t?void 0:t[0];if(void 0!==e){return{
colors:[e.color.value(),void 0,void 0,void 0,void 0,void 0,void 0],lineStyle:void 0,lineWidth:e.width.value()}}return null}isColorDefined(){return!!this._palettesColors.size}singleColor(){return!1}}var h=i(19932);class c{constructor(t){this._rgbaFromInteger=(0,h.rgbaFromIntegerCached)(),this._indexes=t}getPlotPointStyle(t,e){const i=e?(0,a.clearStyle)(e):(0,a.createEmptyStyle)();return this._indexes.forEach(((e,n)=>{const l=t[e+1];if(null!=l){const t=this._rgbaFromInteger(l);i.colors[n]=t}else i.colors[n]="transparent"})),i}isColorDefined(){return!0}singleColor(){return!1}getDefaultPlotPointStyle(){return null}}const u=new Map([[0,function(t,e){const i=(0,n.isColorerPlot)(e)||(0,n.isOhlcColorerPlot)(e);return"target"in e&&e.target===t&&i}],[2,function(t,e){const i=(0,n.isTextColorerPlot)(e);return"target"in e&&e.target===t&&i}],[1,function(t,e){return(0,n.isBgColorerPlot)(e)&&e.id===t}],[3,function(t,e){const i=(0,n.isCandleBorderColorerPlot)(e);return"target"in e&&e.target===t&&i}],[4,function(t,e){const i=(0,n.isCandleWickColorerPlot)(e);return"target"in e&&e.target===t&&i}],[5,function(t,e){const i=(0,n.isUpColorerPlot)(e);return"target"in e&&e.target===t&&i}],[6,function(t,e){const i=(0,n.isDownColorerPlot)(e);return"target"in e&&e.target===t&&i}]]);function _(t,e,i){const{colorers:n}=function(t,e){const i=t.plots,n=i.findIndex((t=>t.id===e)),l=new Map;return i.forEach(((t,i)=>{u.forEach(((n,a)=>{n(e,t)&&l.set(a,i)}))})),{plotIndex:-1===n?null:n,colorers:l}}(t,i);if(n.size)return t.isRGB?new c(n):new d(t,e,i,n);{const t=e.ohlcPlots;if(t&&t[i])return new r(t[i]);const n=e.styles[i];return new r(n)}}},19932:(t,e,i)=>{i.d(e,{rgbaFromIntegerCached:()=>s});var n=i(259332),l=i(432059),a=i(211414);function s(t=1e3){const e=n.default.Cache;n.default.Cache=a.CircularCacheBuffer.bind(a.CircularCacheBuffer,t);const i=(0,n.default)(l.rgbaFromInteger);return n.default.Cache=e,i}},199872:(t,e,i)=>{function n(t,e){const i=new Map;return function(...n){const l=""+(e?e.apply(null,n):n[0]);if(!i.has(l)){const e=t.apply(this,n);return i.set(l,e),e}return i.get(l)}}i.d(e,{memoize:()=>n})}}]);