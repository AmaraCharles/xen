"use strict";(self.webpackChunktradingview=self.webpackChunktradingview||[]).push([[47782,93255],{729030:(e,t,n)=>{n.d(t,{getSymbolData:()=>l});var o=n(702598),i=n(438874),a=n(250378),r=n(685503),s=n(159954);function l(e,t,n,l,d=!0,c=!1){const u=n.join(","),h=(0,i.getSymbolDataUrl)(t,u,l,d,c),p={signal:e,method:"GET",credentials:"include",headers:{Accept:"application/json"}};return(0,o.fetch)(h,p,{logOnErrorStatus:!1}).then((e=>{if(400===e.status){const{status:t,statusText:n}=e;return e.json().then((e=>{const o=e.errmsg;throw new a.BadRequestErrorResponse({status:t,statusText:n,error:o})}))}if(404===e.status){const{status:t,statusText:n}=e;return e.json().then((o=>{if("symbol_not_exists"===o.code){const e=o.errmsg;throw new s.SymbolDoesNotExistErrorResponse({status:t,statusText:n,error:e})}throw new r.HttpErrorResponse(e)}))}if(e.ok)return e.json().then((e=>e));throw new r.HttpErrorResponse(e)}))}},267858:(e,t,n)=>{n.d(t,{provider:()=>o});const o=n(787703)},304986:(e,t,n)=>{n.d(t,{getThemeFromUserSettings:()=>a,saveThemeInUserSettings:()=>r});var o=n(62802),i=n(278855);function a(){return(0,i.getThemeFromCookie)()||(0,o.getValue)("current_theme.name")||null}function r(e){(0,i.setThemeToCookie)(e),(0,o.setValue)("current_theme.name",e,{forceFlush:!0})}},515828:(e,t,n)=>{n.d(t,{MINDS_GROUP_PATH_PATTERN:()=>o,createMindsPath:()=>i});const o="/minds/groups/:symbol/";function i(e,t,n){let i=o.replace(":symbol",encodeURIComponent(e));if(!t)return i;const a=new URLSearchParams;return a.set("mind",t),n&&a.set("editable","true"),i+=`?${a.toString()}`,i}},951713:(e,t,n)=>{n.d(t,{getHideOptions:()=>c,getSavedHideMode:()=>h,toggleHideMode:()=>u});var o=n(650151),i=n(444372),a=n(62802),r=n(84281),s=n(419283),l=n(597101);let d=null;function c(){if(null!==d)return d;const e=(0,r.tradingService)();return d=new Map([["drawings",{label:i.t(null,void 0,n(703217)),dataName:"hide-drawing-tools",tooltip:{active:i.t(null,void 0,n(185891)),inactive:i.t(null,void 0,n(752563))},getBoxedValue:()=>(0,s.hideAllDrawings)(),trackLabel:"hide drawings"}],["indicators",{label:i.t(null,void 0,n(72351)),dataName:"hide-indicators",tooltip:{active:i.t(null,void 0,n(598753)),inactive:i.t(null,void 0,n(178525))},getBoxedValue:()=>(0,s.hideAllIndicators)(),trackLabel:"hide indicators"}],["positions",{label:i.t(null,void 0,n(492226)),dataName:"hide-positions-and-orders",tooltip:{active:i.t(null,void 0,n(420506)),inactive:i.t(null,void 0,n(842164))},getBoxedValue:()=>(0,o.ensureNotNull)(e).showTradedSources,inverted:!0,trackLabel:"hide positions"}],["all",{label:i.t(null,void 0,n(47074)),dataName:"hide-all",tooltip:{active:e?i.t(null,void 0,n(686738)):i.t(null,void 0,n(225881)),inactive:e?i.t(null,void 0,n(418216)):i.t(null,void 0,n(90763))},trackLabel:"hide all"}]]),e||d.delete("positions"),d}function u(e){e?a.setValue("ChartToolsHideMode",e):e=h();const t=p();let n=!t;return"all"===e?(g(((e,t,o)=>{e.setValue(o?!n:n)})),l.hideStateChange.fire({hideMode:e,isActive:n}),n):(g(((o,i,a)=>{if(i===e){const e=t?!a:!o.value();o.setValue(e),n=a?!e:e
}else o.setValue(Boolean(a))})),l.hideStateChange.fire({hideMode:e,isActive:n}),n)}function h(){const e=a.getValue("ChartToolsHideMode","drawings");return c().has(e)?e:"drawings"}function p(){let e=!0;return g(((t,n,o)=>{const i=t.value();e=e&&(o?!i:i)})),e}function g(e){c().forEach(((t,n)=>{var o;const i=null===(o=t.getBoxedValue)||void 0===o?void 0:o.call(t);i&&e(i,n,t.inverted)}))}},394610:(e,t,n)=>{n.d(t,{ActionsProvider:()=>mn,createActionCopyPrice:()=>cn,createActionToggleVisibilityDataSources:()=>pn,createActionTrade:()=>rn,createChangeIntervalsVisibilitiesAction:()=>dn,createLinesAction:()=>un,createPasteAction:()=>sn,createSyncDrawingActions:()=>hn,createVisualOrderAction:()=>ln,defaultContextMenuOptions:()=>on});var o=n(650151),i=n(338619),a=n(960521),r=n(124829),s=n(444372),l=n(764829),d=n(691371),c=n(109436),u=n(287741),h=n(434396),p=n(33052),g=n(716004),m=n(345848),S=n(949532),f=n(67326),y=n(427047),v=n(598631),b=n(84281),T=n(683833),w=n(130841),I=n(999872),_=n(284682),A=n(870408),C=n(622429),P=n(383557),M=n(938614),L=n(711496),N=n(597655),F=n(557433),W=n(314802),D=n(638456),x=n(782014),E=n(354957),R=n(956250),V=n(845520),k=n(470316),O=n(104436),$=n(622161),B=n(519073),K=n(440075),U=n(898192),j=n(465836),H=n(487945),q=n(547777),G=n(370407),z=n(419283),Y=n(378975),Z=n(469805),J=n(412788),Q=n(793993),X=n(218049),ee=n(658843),te=n(418638),ne=n(558634),oe=n(971417),ie=n(306060),ae=n(375308),re=n(314824);const se=(0,
i.getLogger)("Chart.ActionsProvider"),le=new G.TranslatedString("change visibility",s.t(null,void 0,n(201924))),de=new G.TranslatedString("pin to scale {label}",s.t(null,void 0,n(981566))),ce=new G.TranslatedString("pin to right scale",s.t(null,void 0,n(607495))),ue=new G.TranslatedString("pin to left scale",s.t(null,void 0,n(778690))),he=new G.TranslatedString("change earnings visibility",s.t(null,void 0,n(706819))),pe=new G.TranslatedString("change dividends visibility",s.t(null,void 0,n(753929))),ge=new G.TranslatedString("change splits visibility",s.t(null,void 0,n(347474))),me=new G.TranslatedString("change continuous contract switch visibility",s.t(null,void 0,n(818867))),Se=new G.TranslatedString("change futures contract expiration visibility",s.t(null,void 0,n(585532))),fe=new G.TranslatedString("change key facts today visibility",s.t(null,void 0,n(967077))),ye=new G.TranslatedString("change latest news and Minds visibility",s.t(null,void 0,n(350243))),ve=new G.TranslatedString("show all ideas",s.t(null,void 0,n(13336))),be=new G.TranslatedString("show ideas of followed users",s.t(null,void 0,n(791395))),Te=new G.TranslatedString("show my ideas only",s.t(null,void 0,n(757460))),we=new G.TranslatedString("change events visibility on chart",s.t(null,void 0,n(906119))),Ie=new G.TranslatedString("add this symbol to entire layout",s.t(null,void 0,n(679290))),_e=new G.TranslatedString("add this indicator to entire layout",s.t(null,void 0,n(96677))),Ae=new G.TranslatedString("add this strategy to entire layout",s.t(null,void 0,n(358156))),Ce=new G.TranslatedString("add this financial metric to entire layout",s.t(null,void 0,n(267608))),Pe=new G.TranslatedString("apply drawing template",s.t(null,void 0,n(89720))),Me=new G.TranslatedString("lock objects",s.t(null,void 0,n(18942))),Le=new G.TranslatedString("unlock objects",s.t(null,void 0,n(823230))),Ne=new G.TranslatedString("change visibility at current interval and above",s.t(null,void 0,n(545800))),Fe=new G.TranslatedString("change visibility at current interval and below",s.t(null,void 0,n(175645))),We=new G.TranslatedString("change visibility at current interval",s.t(null,void 0,n(584331))),De=new G.TranslatedString("change visibility at all intervals",s.t(null,void 0,n(557916))),xe=s.t(null,void 0,n(366823)),Ee=(0,
q.appendEllipsis)(s.t(null,void 0,n(800264))),Re=s.t(null,void 0,n(698334)),Ve=s.t(null,void 0,n(327298)),ke=s.t(null,void 0,n(703564)),Oe=s.t(null,void 0,n(794559)),$e=s.t(null,void 0,n(702165)),Be=s.t(null,void 0,n(16986)),Ke=s.t(null,void 0,n(312645)),Ue=s.t(null,void 0,n(544579)),je=s.t(null,void 0,n(429436)),He=s.t(null,void 0,n(81054)),qe=s.t(null,void 0,n(32538)),Ge=s.t(null,void 0,n(172046)),ze=s.t(null,void 0,n(590095)),Ye=s.t(null,void 0,n(14115)),Ze=s.t(null,void 0,n(233110)),Je=s.t(null,void 0,n(928280)),Qe=s.t(null,void 0,n(676150)),Xe=s.t(null,void 0,n(694210)),et=s.t(null,void 0,n(960035)),tt=s.t(null,void 0,n(210761)),nt=s.t(null,void 0,n(411254)),ot=s.t(null,void 0,n(635049)),it=s.t(null,void 0,n(319271)),at=s.t(null,void 0,n(715512)),rt=s.t(null,void 0,n(546545)),st=s.t(null,void 0,n(752160)),lt=s.t(null,void 0,n(417293)),dt=s.t(null,void 0,n(21973)),ct=s.t(null,void 0,n(55481)),ut=s.t(null,void 0,n(171179)),ht=s.t(null,void 0,n(804077)),pt=s.t(null,void 0,n(754853)),gt=s.t(null,void 0,n(720177)),mt=s.t(null,void 0,n(700494)),St=s.t(null,void 0,n(960668)),ft=s.t(null,void 0,n(858026)),yt=s.t(null,void 0,n(156982)),vt=(0,q.appendEllipsis)(s.t(null,void 0,n(235088))),bt=(0,q.appendEllipsis)(s.t(null,void 0,n(702439))),Tt=(0,q.appendEllipsis)(s.t(null,void 0,n(232514))),wt=s.t(null,void 0,n(178358)),It=(0,q.appendEllipsis)(s.t(null,void 0,n(276266))),_t=s.t(null,void 0,n(249680)),At=s.t(null,void 0,n(712537)),Ct=s.t(null,void 0,n(93553)),Pt=s.t(null,void 0,n(774975)),Mt=s.t(null,void 0,n(999894)),Lt=s.t(null,void 0,n(205837)),Nt=s.t(null,void 0,n(537113)),Ft=s.t(null,void 0,n(629449)),Wt=s.t(null,void 0,n(350849)),Dt=s.t(null,void 0,n(833158)),xt=s.t(null,void 0,n(81465)),Et=s.t(null,void 0,n(710428)),Rt=s.t(null,void 0,n(68112)),Vt=s.t(null,void 0,n(555418)),kt=s.t(null,void 0,n(510261)),Ot=s.t(null,void 0,n(644020)),$t=(0,q.appendEllipsis)(s.t(null,void 0,n(232514))),Bt=s.t(null,void 0,n(897878)),Kt=s.t(null,void 0,n(239010)),Ut=s.t(null,void 0,n(326090)),jt=s.t(null,void 0,n(995754)),Ht=s.t(null,void 0,n(535679)),qt=s.t(null,void 0,n(709140)),Gt=s.t(null,void 0,n(846607)),zt=s.t(null,void 0,n(639079)),Yt=(0,q.appendEllipsis)(s.t(null,void 0,n(975594))),Zt=(0,q.appendEllipsis)(s.t(null,void 0,n(288853))),Jt=s.t(null,void 0,n(735140)),Qt=s.t(null,void 0,n(163553)),Xt=s.t(null,void 0,n(792957)),en=s.t(null,void 0,n(858764)),tn=s.t(null,void 0,n(910996)),nn=s.t(null,void 0,n(903061)),on={general:!0,mainSeries:!0,mainSeriesTrade:!1,esdStudies:!0,studies:!0,fundamentals:!0,lineTools:!0,publishedCharts:!0,ordersAndPositions:!0,alerts:!0,chartEvents:!0,objectTree:!0,gotoLineTool:!1};function an(e){return(0,H.isActingAsSymbolSource)(e)?e.symbolTitle(u.TitleDisplayTarget.StatusLine,!0,!0):(0,g.clean)(e.title(u.TitleDisplayTarget.StatusLine,!0),!0)}async function rn(e,t,n){if(e.model().isInReplay().value())return null;const o=e.model().mainSeries(),i=o.symbolInfo();if(o.isConvertedToOtherCurrency()||o.isConvertedToOtherUnit()||(0,f.isNonTradableSymbolType)(null==i?void 0:i.type))return null
;const a=await(async()=>{const t=(0,b.tradingService)();if(null===t||0===(await t.brokersMetainfo()).length)return[];const o=e.model().mainSeries();let i;n&&(i=n.localY);try{const e=await(0,T.createTradeContext)(o,i);return await t.chartContextMenuActions(e,{hideNotExecutableAction:!0})}catch(e){return se.logError(e.message),[]}})();if(a.length>0){const e=()=>new Promise(((e,t)=>{0!==a.length?e({name:"trade",label:xe,subItems:a,statName:"Trading"}):e({label:xe,disabled:!0})}));return new d.Action({actionId:"Trading.TradeFromChart",options:{},optionsLoader:()=>(0,w.makeTimeLimited)(e(),5e3,"Action trade not received")})}return null}function sn(e,t){return!t.isEmpty()&&l.enabled("datasource_copypaste")?new re.ActionWithStandardIcon({actionId:"Chart.Clipboard.PasteSource",options:{label:Jt.trim(),shortcutHint:(0,k.humanReadableHash)(k.Modifiers.Mod+86),statName:"Paste",onExecute:()=>e.chartWidgetCollection().clipboard.uiRequestPaste(t)}}):null}function ln(e,t){const n=e.model(),o=n.availableZOrderOperations(t),i=[new re.ActionWithStandardIcon({actionId:"Chart.Source.VisualOrder.BringToFront",options:{label:lt,statName:"BringToFront",disabled:!o.bringToFrontEnabled,onExecute:()=>n.bringToFront(t)}}),new re.ActionWithStandardIcon({actionId:"Chart.Source.VisualOrder.SendToBack",options:{label:dt,statName:"SendToBack",disabled:!o.sendToBackEnabled,onExecute:()=>n.sendToBack(t)}}),new re.ActionWithStandardIcon({actionId:"Chart.Source.VisualOrder.BringForward",options:{label:ct,statName:"BringForward",disabled:!o.bringForwardEnabled,onExecute:()=>n.bringForward(t)}}),new re.ActionWithStandardIcon({actionId:"Chart.Source.VisualOrder.SendBackward",options:{label:ut,statName:"SendBackward",disabled:!o.sendBackwardEnabled,onExecute:()=>n.sendBackward(t)}})];return new re.ActionWithStandardIcon({actionId:"Chart.Source.VisualOrder",options:{label:ht,iconId:"Chart.VisualOrder",statName:"VisualOrder",subItems:i}})}function dn(e,t){const n=e.model(),o=(e,o)=>{const i=Y.Interval.parse(n.mainSeries().interval()),a=(0,J.getIntervalsVisibilitiesForMode)(i,e),r=[],s=[];t.forEach((e=>{const t=e.properties().intervalsVisibilities.childs();r.push(t.ticks),s.push(a.ticks),r.push(t.seconds),s.push(a.seconds),r.push(t.secondsFrom),s.push(a.secondsFrom),r.push(t.secondsTo),s.push(a.secondsTo),r.push(t.minutes),s.push(a.minutes),r.push(t.minutesFrom),s.push(a.minutesFrom),r.push(t.minutesTo),s.push(a.minutesTo),r.push(t.hours),s.push(a.hours),r.push(t.hoursFrom),s.push(a.hoursFrom),r.push(t.hoursTo),s.push(a.hoursTo),r.push(t.days),s.push(a.days),r.push(t.daysFrom),s.push(a.daysFrom),r.push(t.daysTo),s.push(a.daysTo),r.push(t.weeks),s.push(a.weeks),r.push(t.weeksFrom),s.push(a.weeksFrom),r.push(t.weeksTo),s.push(a.weeksTo),r.push(t.months),s.push(a.months),r.push(t.monthsFrom),s.push(a.monthsFrom),r.push(t.monthsTo),s.push(a.monthsTo),r.push(t.ranges),s.push(a.ranges)})),n.setProperties(r,s,o,(0,ae.sourcesAffectState)(t))},i=[new re.ActionWithStandardIcon({actionId:"Chart.Source.IntervalsVisibility.CurrentAndAbove",options:{label:gt,
statName:"currentAndAboveIntervals",onExecute:()=>o(3,Ne)}}),new re.ActionWithStandardIcon({actionId:"Chart.Source.IntervalsVisibility.CurrentAndBelow",options:{label:mt,statName:"currentAndBelowIntervals",onExecute:()=>o(2,Fe)}}),new re.ActionWithStandardIcon({actionId:"Chart.Source.IntervalsVisibility.Current",options:{label:St,statName:"currentInterval",onExecute:()=>o(1,We)}}),new re.ActionWithStandardIcon({actionId:"Chart.Source.IntervalsVisibility.All",options:{label:ft,statName:"allIntervals",onExecute:()=>o(0,De)}})];return new re.ActionWithStandardIcon({actionId:"Chart.Source.IntervalsVisibility",options:{label:pt,statName:"IntervalsVisibility",subItems:i}})}function cn(e,t){var n,o,i;const a=e.defaultPriceScale(),r=void 0!==t?a.coordinateToPrice(t,null!==(o=null===(n=e.mainDataSource())||void 0===n?void 0:n.firstValue())&&void 0!==o?o:0):e.model().mainSeries().lastValueData(4,!0,!0).price,s=null===(i=e.mainDataSource())||void 0===i?void 0:i.formatter();if(void 0===r||!s)return null;const l=s.format(r),d=s.format(r,{ignoreLocaleNumberFormat:!0});return new re.ActionWithStandardIcon({actionId:"Chart.Clipboard.CopyPrice",options:{label:`${Qt} ${l}`,statName:"CopyPrice",onExecute:()=>(0,Q.getClipboard)().writeText(d)}})}function un(e){const t=e.actions(),n=[t.showPriceLine];return n.push(t.showSeriesPrevCloseLine),n.push(t.showPrePostMarketPriceLine),n.push(t.showHighLowPriceLines),e.model().model().hasCustomSource("bidask")&&n.push(t.showBidAskLines),new re.ActionWithStandardIcon({actionId:"Chart.Lines",options:{label:yt,statName:"Lines",subItems:n}})}function hn(e,t){const n=[];{if(z.isToolCreatingNow.value())return n;const o=()=>t.some((e=>e.isSynchronizable()));{if(!window.user.is_pro)return n;if(!o())return n;let i=t[0].sharingMode().value();i=t.every((e=>e.sharingMode().value()===i))?i:null;const a=e.model();n.push(new d.Action({actionId:"Chart.LineTool.NoSync",options:{label:qt,statName:"NoSyncDrawing",checkable:!0,checked:0===i,onExecute:e=>{e.isChecked()&&a.shareLineTools(t,0)}}}),new d.Action({actionId:"Chart.LineTool.SyncInLayout",options:{label:Gt,statName:"SyncDrawingInLayout",checkable:!0,checked:1===i,onExecute:e=>{e.isChecked()&&a.shareLineTools(t,1)}}}),new d.Action({actionId:"Chart.LineTool.SyncGlobally",options:{label:zt,statName:"SyncDrawingGlobally",checkable:!0,checked:2===i,onExecute:e=>{e.isChecked()&&a.shareLineTools(t,2)}}}))}}return n}function pn(e,t){const n=t[0].properties().visible.value(),o=n?Ve:Re,i=n?"Chart.Hide":"Chart.ShowObject",a=n?"Chart.SelectedObject.Hide":"Chart.SelectedObject.Show";return new re.ActionWithStandardIcon({actionId:a,options:{checkable:!0,statName:"ToggleVisibilitySelectedObject",label:o,iconId:i,onExecute:()=>{const o=e.model();o.withMacro(le,(()=>{t.forEach((e=>{o.setProperty(e.properties().visible,!n,le,Z.lineToolsDoNotAffectChartInvalidation&&(0,j.isLineTool)(e))}))}))}}})}function gn(){var e,t;return!(0,D.onWidget)()&&!(0,W.isOnMobileAppPage)("any")&&!!(null===(t=null===(e=window.widgetbar)||void 0===e?void 0:e.layout)||void 0===t?void 0:t.canOpen())}
class mn{constructor(e,t){this._chartWidget=e,this._options=(0,r.merge)((0,r.clone)(on),t||{})}async contextMenuActionsForSources(e,t,n,o,i){const a=e[0],r=this._options,s=[];if(a===this._chartWidget.model().mainSeries()&&r.mainSeries)s.push(...await this._contextMenuActionsForSeries(a,n));else if((0,h.isESDStudy)(a)&&r.esdStudies)s.push(...this._contextMenuActionsForESD());else if((0,h.isRollDatesStudy)(a))s.push(...this._contextMenuActionsForRollDates());else if("futures_contract_expiration"===a.id())s.push(...this._contextMenuActionsForFuturesContractExpiration());else if("keyFactsToday"===a.id())s.push(...this._contextMenuActionsForKeyFactsToday());else if("latestUpdates"===a.id())s.push(...this._contextMenuActionsForisLatestUpdates());else if((0,h.isStudy)(a)&&r.studies)s.push(...await this._contextMenuActionsForStudy(a,t,n));else if(a instanceof C.PublishedChartsTimeline&&r.publishedCharts)s.push(...this._contextMenuActionsForPublishedTimeline(a));else if((a instanceof I.LineToolOrder||a instanceof _.LineToolPosition)&&r.ordersAndPositions)s.push(...this._contextMenuActionsForTradingDrawings(a));else if((0,M.isAlertLabel)(a)&&a.alert().id().value()&&!a.alert().isNew()&&r.alerts)s.push(...await this._contextMenuActionsForAlertLabel(a.alert(),o));else if((0,j.isLineTool)(a)&&r.lineTools){const t=e.filter(j.isLineTool);s.push(...await this._contextMenuActionsForLineTool(t))}else a.id()===F.ChartEventsSourceId.Value&&r.chartEvents&&s.push(...this._contextMenuActionsForChartEvents(a));return s.length&&(null==i?void 0:i.length)&&s.push(new d.Separator),s.push(...null!=i?i:[]),s}_isReadOnly(){return this._chartWidget.readOnly()}_createActionScale(e){const t=(0,o.ensureNotNull)(e.priceScale()),n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(e)),a=i.priceScalePosition(t),r=("left"===a?i.leftPriceScales():i.rightPriceScales()).indexOf(t),s=n.priceScaleSlotsCount().totallySlots<2?"dontneedname":"needname",l="overlay"===a?"":(0,c.getPriceAxisNameInfo)(a,r).label,d=Qe.format({label:l}),u={"left-needname":d,"left-dontneedname":et,"right-needname":d,"right-dontneedname":tt,"overlay-needname":Xe,"overlay-dontneedname":Xe}[a+"-"+s];return new re.ActionWithStandardIcon({actionId:"Chart.Source.ChangePriceScale",options:{label:u,iconId:"Chart.PriceScale",subItems:this._createActionScaleItems(e)}})}_createActionResetInputPoints(e){const t=e.metaInfo(),o=t.inputs.filter(X.isTimeOrPriceNotHiddenInput);return 0===o.length?null:new re.ActionWithStandardIcon({actionId:"Chart.Source.ResetInputPoints",options:{label:Zt,onExecute:async()=>{let i;try{const a=e.properties().childs().inputs.state();for(const e of Object.keys(a))o.find((t=>t.id===e))||delete a[e];const r=new ee.Property({inputs:a
}),s=await Promise.all([n.e(57194),n.e(75816),n.e(93703),n.e(46445),n.e(62093),n.e(44524),n.e(2520),n.e(21356),n.e(49481),n.e(53953),n.e(62564),n.e(58985),n.e(53799),n.e(59258),n.e(82421),n.e(46489),n.e(67158),n.e(74600),n.e(25480),n.e(75826),n.e(65857),n.e(29800),n.e(36010),n.e(23141),n.e(97384),n.e(72197),n.e(29296),n.e(95083),n.e(88015),n.e(62234),n.e(3782),n.e(16356),n.e(49162),n.e(22106),n.e(30422),n.e(45621),n.e(98734),n.e(24125),n.e(93523),n.e(30614),n.e(7001),n.e(64797),n.e(71329),n.e(94106),n.e(63168),n.e(51488),n.e(22602),n.e(75364),n.e(8222),n.e(79412),n.e(32196),n.e(77399),n.e(82440),n.e(31085),n.e(89255),n.e(90303),n.e(2573),n.e(12400),n.e(79184),n.e(76810),n.e(82321),n.e(50030),n.e(87473),n.e(73026),n.e(88492),n.e(72372),n.e(23594),n.e(16465),n.e(66063),n.e(89178),n.e(31832),n.e(53030)]).then(n.bind(n,204564));i=(await s.selectInputValuesOnChart(this._chartWidget,o,r,t.shortDescription,t.inputs)).customSourceId,e.properties().mergeAndFire(r.state())}finally{void 0!==i&&this._chartWidget.model().model().removeCustomSource(i)}}}})}_createActionLayoutChartsSync(){return new x.LayoutChartsSyncContextMenuAction(this._chartWidget.linkingGroupIndex().readonly(),(e=>this._chartWidget.model().setLinkingGroupIndex(e)))}_createActionScaleDetach(e,t,n,i){const a=this._chartWidget.model().model(),r=(0,o.ensureNotNull)(a.paneForSource(e));if(!r.canCreateNewPriceScale())return null;const s=(0,o.ensureNotNull)(e.priceScale()),l=s.canDetachSource(e),d=r.priceScalePosition(s),u=l||d!==t;if(!u)return null;const h=a.priceScaleSlotsCount(),p={left:{labelled:je,sided:Ze},right:{labelled:je,sided:Je}},g="left"===t?r.leftPriceScales().length:r.rightPriceScales().length,m=h[t]>g?"labelled":"sided",S=(0,c.getPriceAxisNameInfo)(t,g).label,f=p[t][m].format({label:S});return new re.ActionWithStandardIcon({actionId:"Chart.Source.ChangePriceScale",options:{checkable:!1,disabled:!u,label:f,statName:i,payload:e,onExecute:n}})}_onDetachLeft(e){const t=e.getPayload(),n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t));this._chartWidget.model().detachToLeft(t,i)}_onDetachRight(e){const t=e.getPayload(),n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t));this._chartWidget.model().detachToRight(t,i)}_createActionScaleDetachLeft(e){return this._createActionScaleDetach(e,"left",this._onDetachLeft.bind(this),"ToggleScaleLeft")}_createActionScaleDetachRight(e){return this._createActionScaleDetach(e,"right",this._onDetachRight.bind(this),"ToggleScaleRight")}_onMoveToScale(e){const t=e.getPayload();if(t.datasource.priceScale()===t.priceScale)return;const n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t.datasource));this._chartWidget.model().moveToScale(t.datasource,i,t.priceScale,t.undoText)}_createMoveToScaleAction(e,t,n,o){const i=e.priceScale()===t;return new re.ActionWithStandardIcon({actionId:"Chart.Source.MoveToOtherScale",options:{checkable:!0,checked:i,label:n,statName:"ToggleScale",payload:{datasource:e,priceScale:t,undoText:o},
onExecute:this._onMoveToScale.bind(this)}})}_onNoScale(e){const t=e.getPayload().datasource,n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(t));i.isOverlay(t)||this._chartWidget.model().detachNoScale(t,i)}_createActionNoScale(e){const t=this._chartWidget.model().model(),n=(0,o.ensureNotNull)(t.paneForSource(e)),i=n.actionNoScaleIsEnabled(e);return new re.ActionWithStandardIcon({actionId:"Chart.Source.MoveToNoScale",options:{checkable:!0,checked:n.isOverlay(e),label:nt,disabled:!i,statName:"ToggleNoScale",payload:{datasource:e},onExecute:this._onNoScale.bind(this)}})}_createActionScaleItems(e){const t=[],n=this._chartWidget.model().model(),i=(0,o.ensureNotNull)(n.paneForSource(e)),a=n.priceScaleSlotsCount().totallySlots>1,r=i.rightPriceScales(),s=i.leftPriceScales(),l=this._createActionScaleDetachRight(e),u=this._createActionScaleDetachLeft(e),h=r.length+s.length+(null===l?0:1)+(null===u?0:1)>2,p={right:{hidden:{checked:{labelled:ke,sided:Oe},unchecked:{labelled:$e,sided:Be}},visible:{checked:{labelled:Ke,sided:Ue},unchecked:{labelled:je,sided:He}}},left:{hidden:{checked:{labelled:ke,sided:qe},unchecked:{labelled:$e,sided:Ge}},visible:{checked:{labelled:Ke,sided:ze},unchecked:{labelled:je,sided:Ye}}}},g={right:ce,left:ue},m={left:i.visibleLeftPriceScales(),right:i.visibleRightPriceScales()},S=(t,n)=>{const o=("right"===n?r:s)[t],i=m[n].includes(o)?"visible":"hidden",l=e.priceScale()===o?"checked":"unchecked",d=a?"labelled":"sided",u=p[n],h=(0,c.getPriceAxisNameInfo)(n,t).label;return{actionText:u[i][l][d].format({label:h}),undoText:a?de.format({label:h}):g[n]}};t.push(...r.map(((t,n)=>{const o=S(n,"right");return this._createMoveToScaleAction(e,t,o.actionText,o.undoText)}))),null!==l&&t.push(l);h&&(r.length>0||null!==l)&&t.push(new d.Separator);t.push(...s.map(((t,n)=>{const o=S(n,"left");return this._createMoveToScaleAction(e,t,o.actionText,o.undoText)}))),null!==u&&t.push(u);h&&(s.length>0||null!==u)&&t.push(new d.Separator);return t.push(this._createActionNoScale(e)),t}_createActionMergeUp(e){const t=this._chartWidget.model();return t.model().isMergeUpAvailableForSource(e)?new re.ActionWithStandardIcon({actionId:"Chart.Source.MergeUp",options:{label:it,statName:"MergeUp",onExecute:()=>t.mergeSourceUp(e)}}):null}_createActionUnmergeUp(e){const t=this._chartWidget.model();return t.model().isUnmergeAvailableForSource(e)?new re.ActionWithStandardIcon({actionId:"Chart.Source.UnmergeUp",options:{label:at,statName:"UnmergeUp",onExecute:()=>t.unmergeSourceUp(e)}}):null}_createActionMergeDown(e){const t=this._chartWidget.model();return t.model().isMergeDownAvailableForSource(e)?new re.ActionWithStandardIcon({actionId:"Chart.Source.MergeDown",options:{label:rt,statName:"MergeDown",onExecute:()=>t.mergeSourceDown(e)}}):null}_createActionUnmergeDown(e){const t=this._chartWidget.model();return t.model().isUnmergeAvailableForSource(e)?new re.ActionWithStandardIcon({actionId:"Chart.Source.UnmergeDown",options:{label:st,statName:"UnmergeDown",onExecute:()=>t.unmergeSourceDown(e)}}):null}
_mergeContentMenuItems(e){return[this._createActionMergeUp(e),this._createActionUnmergeUp(e),this._createActionMergeDown(e),this._createActionUnmergeDown(e)].filter(r.notNull)}_createActionMove(e){const t=this._mergeContentMenuItems(e);return t.length>0?new re.ActionWithStandardIcon({actionId:"Chart.Source.MoveToPane",options:{label:ot,iconId:"Chart.Move",subItems:t}}):null}async _contextMenuActionsForSeries(e,t){var n;const i=[],a=this._chartWidget.model().model(),r=(0,o.ensureNotNull)(a.paneForSource(e)),s=this._chartWidget.actions(),c=t&&"localY"in t?t.localY:void 0;if(this._isReadOnly())i.push(pn(this._chartWidget,[e])),i.push(new d.Separator),i.push(this._createActionScale(e));else{if(e.alertCreationAvailable().value()){const t=(await(0,ne.getAlertsChartActionCreators)()).createAlert(this._chartWidget,{series:e,localY:c});null!==t&&i.push(t)}if(i.push(this._createActionAddChildStudy(e)),this._options.fundamentals){const t=this._createActionAddFundamentals(e);null!==t&&i.push(t)}if(this._options.mainSeriesTrade){const e=await rn(this._chartWidget);null!==e&&i.push(e)}i.length>0&&!(i[i.length-1]instanceof d.Separator)&&i.push(new d.Separator),l.enabled("symbol_info")&&i.push(s.showSymbolInfoDialog),gn()&&i.push(this._chartWidget.actions().showDataWindow);const t=a.mainSeries().symbolInfo();if(s.showFinancials&&null!==t&&(0,L.hasFinancialsByTypespecs)(t.type,t.typespecs)&&i.push(s.showFinancials),i.length>0&&!(i[i.length-1]instanceof d.Separator)&&i.push(new d.Separator),!r.isEmpty()&&l.enabled("datasource_copypaste")){const e=cn(r,c),t=sn(this._chartWidget,r);(e||t)&&(e&&i.push(e),t&&i.push(t),i.push(new d.Separator))}i.push(ln(this._chartWidget,[e]));const o=this._createActionMove(e);null!==o&&i.push(o),i.push(this._createActionScale(e)),this._chartWidget.isMultipleLayout().value()&&(this._chartWidget.chartWidgetCollection().lock.symbol.value()||this._chartWidget.chartWidgetCollection().lock.interval.value())&&i.push(this._createActionLayoutChartsSync()),i.push(pn(this._chartWidget,[e])),i.push(new d.Separator);Boolean(null===(n=window.widgetbar)||void 0===n?void 0:n.widget("watchlist"))&&s.addToWatchlist&&i.push(s.addToWatchlist),l.enabled("text_notes")&&i.push(s.addToTextNotes),i[i.length-1]instanceof d.Separator||i.push(new d.Separator),l.enabled("show_chart_property_page")&&!this._chartWidget.onWidget()&&i.push(s.mainSeriesPropertiesAction),i[i.length-1]instanceof d.Separator&&i.pop()}return i}_createActionAddChildStudy(e){const t=this._chartWidget.model().model();return new re.ActionWithStandardIcon({actionId:"Chart.Indicator.ApplyChildIndicator",options:{label:vt.format({studyTitle:an(e)}),iconId:"Chart.ApplyIndicator",statName:"ApplyIndicator",onExecute:()=>{const n=this._chartWidget.showIndicators((0,h.isStudy)(e)?[e]:[]);if(n&&(0,h.isStudy)(e)){const e=()=>{(0,m.trackEvent)("SOS","Apply SOS","Apply by RC menu")},o=t.studyInserted();o.subscribe(this,e),n.visible().subscribe((t=>{t||o.unsubscribe(this,e)}),{once:!0})}}}})}_createActionAddFundamentals(e){{const t=e.symbolInfo()
;if(null!==t&&"forex"!==t.type&&!(0,B.hasCryptoTypespec)(t.typespecs||[]))return new re.ActionWithStandardIcon({actionId:"Chart.Indicator.ApplyFinancials",options:{label:bt.format({instrumentName:an(e)}),iconId:"Chart.Financials",statName:"ApplyFundamental",onExecute:()=>{this._chartWidget.showFundamentals(e!==this._chartWidget.model().mainSeries()?e:void 0)}}})}return null}_createActionShowSymbolInfoDialog(e,t){const n=this._chartWidget.model().model();return new re.ActionWithStandardIcon({actionId:"Chart.Dialogs.ShowSymbolInfo",options:{label:Yt,iconId:"Chart.SymbolInfo",checkable:!1,statName:"SymbolInfo",onExecute:()=>{const o={symbolInfo:e.symbolInfo(),unitDescription:e=>e?t.description(e):"",dateFormatter:n.dateFormatter()};(0,K.showSymbolInfoDialog)(o)}}})}_createActionShowProperties(e){return new re.ActionWithStandardIcon({actionId:"Chart.Indicator.ShowSettingsDialog",options:{label:Tt,iconId:"Settings",statName:"EditSelectedObject",onExecute:()=>this._chartWidget.showSourceProperties(e)}})}async _contextMenuActionsForStudy(e,t,o){const i=this._chartWidget.model(),a=t!==i.paneForSource(e),r=this._chartWidget.actions(),c=o&&"localY"in o?o.localY:void 0,u=[];if(!e.userEditEnabled())return u;if(this._chartWidget.readOnly())u.push(pn(this._chartWidget,[e])),u.push(new d.Separator),(0,y.isNonSeriesStudy)(e)||u.push(this._createActionScale(e));else{if(e.alertCreationAvailable().value()){const t=(await(0,ne.getAlertsChartActionCreators)()).createAlert(this._chartWidget,{series:e,localY:c});null!==t&&u.push(t)}if(l.enabled("study_on_study")&&e.canHaveChildren()&&u.push(this._createActionAddChildStudy(e)),(0,h.isCompareOrOverlayStudy)(e)&&this._options.fundamentals){const t=this._createActionAddFundamentals(e);null!==t&&u.push(t)}const t=this._createApplyToEntireLayoutCommand(e);null!==t&&u.push(t);const o=this._createAddIndicatorToFavoritesCommand(e);if(o&&u.push(o),u.length>0&&!(u[u.length-1]instanceof d.Separator)&&u.push(new d.Separator),l.enabled("symbol_info")&&(0,h.isCompareOrOverlayStudy)(e)&&null!==e.symbolInfo()&&(u.push(this._createActionShowSymbolInfoDialog(e,this._chartWidget.model().model().availableUnits())),u.push(new d.Separator)),a||u.push(ln(this._chartWidget,[e])),u.push(dn(this._chartWidget,[e])),!(0,y.isNonSeriesStudy)(e)&&!a){const t=this._createActionMove(e);null!==t&&u.push(t),u.push(this._createActionScale(e))}u.push(new d.Separator);const p=e.metaInfo();if(!(0,D.onWidget)()&&e.pineSourceCodeModel){const t=await e.pineSourceCodeModel();if(t){const[o,a]=await Promise.all([(0,te.showAboutTheStudyHandler)(t),t.requestUpdateInformation()]);if(o){const t=(0,h.isFundamentalStudy)(e)?(0,q.appendEllipsis)(s.t(null,void 0,n(746135))):p.pine?(0,q.appendEllipsis)(s.t(null,void 0,n(657486))):(0,q.appendEllipsis)(s.t(null,void 0,n(717274)));u.push(new d.Action({actionId:"Chart.Indicator.About",options:{label:t,statName:"OpenSelectedObjectAbout",onExecute:o}}))}if(a&&a.lastVersion.isGreater(ie.Version.parse(a.currentVersion))){const o=(0,h.isFundamentalStudy)(e)?(0,
q.appendEllipsis)(s.t(null,void 0,n(136339))):p.pine?(0,q.appendEllipsis)(s.t(null,void 0,n(342524))):(0,q.appendEllipsis)(s.t(null,void 0,n(798451)));u.push(new d.Action({actionId:"Chart.Indicator.About",options:{label:o,statName:"UpdateStudyVersion",onExecute:async()=>{t.updateToVersion(i,a.lastVersion)}}}))}}}if(!(0,h.isFundamentalStudy)(e)&&p.pine){let t=!1;if(r.viewSourceCode){const{scriptIdPart:e,pine:{version:n}}=p;u.push(r.viewSourceCode),t=!0,r.viewSourceCode.update({disabled:!1}),(0,A.isAuthToGetPineSourceCode)(e,n).then((e=>{e||r.viewSourceCode.update({disabled:!0})})).catch((e=>{se.logError("Failed isAuthToGetPineSourceCode, reason: "+e)}))}const n=this._createActionResetInputPoints(e);n&&(t=!0,u.push(n)),t&&u.push(new d.Separator)}if(window.is_authenticated&&(0,R.isUserStudyWithLogs)(e)&&(u.push(new d.Action({actionId:"Chart.Indicator.PineLogs",options:{label:s.t(null,void 0,n(69056)),statName:"PineLogs",onExecute:()=>{(0,V.openPineLogsInRightPanel)(e)}}})),u.push(new d.Separator)),e.copiable()){const t=new re.ActionWithStandardIcon({actionId:"Chart.Clipboard.CopySource",options:{label:_t,shortcutHint:(0,k.humanReadableHash)(k.Modifiers.Mod+67),statName:"Copy",onExecute:()=>{this._chartWidget.chartWidgetCollection().clipboard.uiRequestCopy([e])}}});u.push(t)}u.push(pn(this._chartWidget,[e])),u.push(r.studyRemove);const g=!this._chartWidget.onWidget()&&this._options.objectTree&&r.paneObjectTree,m=gn();(g||m)&&(u.push(new d.Separator),g&&u.push(r.paneObjectTree),m&&u.push(this._chartWidget.actions().showDataWindow)),u.push(new d.Separator),l.enabled("property_pages")&&new v.MetaInfoHelper(p).hasUserEditableOptions()&&u.push(this._createActionShowProperties(e)),u[u.length-1]instanceof d.Separator&&u.pop()}return u}_createLineToolTemplateAction(e){{const t=this._chartWidget.model(),o=n=>{t.applyLineToolTemplate(e,n,Pe)};return new d.Action({actionId:"Chart.LineTool.Templates",options:{},optionsLoader:async()=>{const{LinetoolTemplatesList:i}=await Promise.all([n.e(68541),n.e(5483),n.e(6047),n.e(3177)]).then(n.bind(n,670019)),a=new i(e.toolname,o),r=[];if(l.enabled("drawing_templates")){const t=new re.ActionWithStandardIcon({actionId:"Chart.LineTool.Templates.SaveAs",options:{label:It,statName:"SaveAs",onExecute:()=>{a.showSaveDialog((t=>{const n=JSON.stringify(e.template());a.saveTemplate(t,n)}))}}});r.push(t)}const s=new re.ActionWithStandardIcon({actionId:"Chart.LineTool.Templates.ApplyDefaults",options:{label:wt,statName:"ApplyDefault",onExecute:()=>{t.restorePropertiesForSource(e),window.lineToolPropertiesToolbar.refresh()}}});return r.push(s),new Promise((e=>{a.templatesLoaded().then((()=>{var e;const t=null!==(e=a.getData())&&void 0!==e?e:[];t.length>0&&r.push(new d.Separator),t.forEach(((e,t)=>{const n=new re.ActionWithStandardIcon({actionId:"Chart.LineTool.Templates.Apply",options:{label:e,statName:"ApplyTemplate",onExecute:()=>a.loadTemplate(e),toolbox:{type:O.ToolboxType.Delete,action:()=>{a.deleteAction(e)}},showToolboxOnHover:!0}});r.push(n)}))}),(e=>{se.logWarn(e)})).then((()=>{e({label:Ct,
statName:"Template",subItems:r})}))}))}})}}_createActionToggleLockLineTools(e){const t=e[0].properties().frozen.value(),n=t?Mt:Lt;return new re.ActionWithStandardIcon({actionId:"Chart.SelectedObject.ToggleLocked",options:{label:n,statName:"ToggleLockSelectedObject",checkable:!0,iconId:t?"Chart.UnlockObject":"Chart.LockObject",onExecute:()=>{if(1===e.length)this._chartWidget.toggleLockSelectedObject();else{const n=t?Le:Me,o=this._chartWidget.model();o.withMacro(n,(()=>{e.forEach((e=>{o.setProperty(e.properties().frozen,!t,n,Z.lineToolsDoNotAffectChartInvalidation)}))}))}}}})}async _contextMenuActionsForLineTool(e){const t=[],n=this._chartWidget.actions(),i=this._chartWidget.model().model(),r=()=>{t.push(ln(this._chartWidget,e))},s=()=>{t.push(dn(this._chartWidget,e))},c=()=>{const n=e.filter((e=>e.cloneable()));if(n.length>0){const e=new re.ActionWithStandardIcon({actionId:"Chart.LineTool.Clone",options:{label:At,iconId:"Chart.Clone",shortcutHint:(0,k.humanReadableModifiers)(k.Modifiers.Mod)+"Drag",statName:"Clone",onExecute:()=>this._chartWidget.model().cloneLineTools(n,!1)},id:"Clone"});t.push(e)}return!!n.length},h=()=>{const n=e.filter((e=>e.copiable()));if(n.length>0){const e=new d.Action({actionId:"Chart.Clipboard.CopyLineTools",options:{label:_t,shortcutHint:(0,k.humanReadableHash)(k.Modifiers.Mod+67),statName:"Copy",onExecute:()=>this._chartWidget.chartWidgetCollection().clipboard.uiRequestCopy(n)},id:"Copy"});t.push(e)}return!!n.length},p=()=>{const n=hn(this._chartWidget,e);return t.push(...n),n.length>0},g=async e=>{if(this._chartWidget.model().isInReplay().value())return;const n=e.getOrderTemplate();if(null===n)return;const r=(0,b.tradingService)();if(null!==r){const e=r.activeBroker();if(e&&1===e.connectionStatus()&&e.metainfo().configFlags.supportLimitOrders){const s=i.mainSeries(),{symbol:l}=await r.getActualSymbol(s.proSymbol()),{tradable:c}=await e.isTradable(l);if(c){const{qty:{step:i}}=await e.symbolInfo(l);n.symbol=l,n.qty=function(e,t){return(0,a.Big)(e).div(t).round(void 0,0).mul(t).toNumber()}(n.qty,i),t.push(new d.Separator),t.push(function(e){const t=(0,o.ensureNotNull)((0,b.tradingService)());return new re.ActionWithStandardIcon({actionId:"Chart.LineTool.CreateLimitOrderFromState",options:{label:Ee,statName:"CreateLimitOrder",onExecute:()=>{t.trackEvent("Chart Context Menu","RiskRewardCreateLimitOrder"),(0,o.ensureNotNull)(t.brokerCommandsUI()).placeOrder(e)}}})}(n))}}else null===e&&(t.push(new d.Separator),t.push((0,o.ensureNotNull)(function(){const e=(0,o.ensureNotNull)((0,b.tradingService)());return new d.Action({actionId:"Trading.ShowSelectBrokerPanel",options:{label:Ee,statName:"ShowSelectBrokerNotification",onExecute:()=>{var t;(0,N.isMobileTradingAvailable)()&&!(null===(t=window.TradingView.bottomWidgetBar)||void 0===t?void 0:t.isVisible().value())?e.toggleTradingPanelPopup():e.toggleTradingWidget(),e.onNeedSelectBroker.fire()}}})}())))}},m=e=>{const n=new re.ActionWithStandardIcon({actionId:"Chart.ScrollToLineTool",options:{label:Pt.format({
lineToolName:e.title(u.TitleDisplayTarget.StatusLine)}),statName:"GoToLineTool",checkable:!1,onExecute:async()=>this._chartWidget.model().scrollToLineTool(e)}});t.push(n)},S=e=>{const t=this._chartWidget.model().model().lineToolsGroupModel(),n=e.map((e=>t.groupForLineTool(e)));return new Set(n).size<=1};if(1===e.length){const o=e[0];if(this._chartWidget.readOnly())t.push(pn(this._chartWidget,[o]));else if(o.userEditEnabled()){if(E.alertsAvailable&&!this._chartWidget.onWidget()){const e=await(0,ne.getAlertsChartActionCreators)();if(o.hasAlert&&o.hasAlert().value())t.push(e.editAlertOnLineDataSource(o)),t.push(new d.Separator);else if(o.canHasAlert()&&o.alertCreationAvailable().value()){const n=e.createAlert(this._chartWidget,{drawing:o});null!==n&&(t.push(n),t.push(new d.Separator))}}{const e=this._createLineToolTemplateAction(o);null!==e&&t.push(e)}r(),s(),this._options.objectTree&&n.paneObjectTree&&t.push(n.paneObjectTree),await g(o),t.push(new d.Separator);let e=c();e=h()||e,e&&t.push(new d.Separator),e=p(),e&&t.push(new d.Separator),t.push(this._createActionToggleLockLineTools([o])),t.push(pn(this._chartWidget,[o])),t.push(n.lineRemove),o.points().length>0&&this._options.gotoLineTool&&(t.push(new d.Separator),m(o));const i=await this._chartWidget.propertiesDefinitionsForSource(o);if(l.enabled("property_pages")&&null!==i&&(t.push(new d.Separator),t.push(n.format)),o.additionalActions){t.push(new d.Separator);const e=o.additionalActions(this._chartWidget.model());t.push(...e)}}}else this._options.objectTree&&n.paneObjectTree&&t.push(n.paneObjectTree),S(e)&&r(),s(),t.length>0&&t.push(new d.Separator),c(),h(),p(),t.push(new d.Separator),t.push(this._createActionToggleLockLineTools(e)),t.push(pn(this._chartWidget,e)),t.push(n.lineRemove),l.enabled("property_pages")&&(t.push(new d.Separator),t.push(n.format));return t}_createEarningsShow(){const e=this._chartWidget.model().mainSeries().properties().childs().esdShowEarnings;return new d.Action({actionId:"Chart.ToggleVisibility.Earnings",options:{label:Nt,checkable:!0,checked:e.value(),name:"ToggleShowEarnings",statName:"ToggleShowEarnings",onExecute:t=>this._chartWidget.model().setProperty(e,t.isChecked(),he)}})}_createDividendsShow(){const e=this._chartWidget.model().mainSeries().properties().childs().esdShowDividends;return new d.Action({actionId:"Chart.ToggleVisibility.Dividends",options:{label:Ft,checkable:!0,checked:e.value(),name:"ToggleShowDividends",statName:"ToggleShowDividends",onExecute:t=>this._chartWidget.model().setProperty(e,t.isChecked(),pe)}})}_createSplitsShow(){const e=this._chartWidget.model().mainSeries().properties().childs().esdShowSplits;return new d.Action({actionId:"Chart.ToggleVisibility.Splits",options:{checkable:!0,label:Wt,checked:e.value(),name:"ToggleShowSplits",statName:"ToggleShowSplits",onExecute:t=>this._chartWidget.model().setProperty(e,t.isChecked(),ge)}})}_contextMenuActionsForESD(){const e=[];return this._chartWidget.readOnly()||e.push((0,o.ensureNotNull)(this._createDividendsShow()),(0,
o.ensureNotNull)(this._createSplitsShow()),(0,o.ensureNotNull)(this._createEarningsShow())),e}_contextMenuActionsForRollDates(){const e=[];if(!this._chartWidget.readOnly()){const t=this._chartWidget.model().mainSeries().properties().childs().showContinuousContractSwitches;e.push(new d.Action({actionId:"Chart.ToggleVisibility.ContinuousContractSwitch",options:{label:Dt,checkable:!0,checked:t.value(),name:"ToggleShowContractSwitches",statName:"ToggleShowContractSwitches",onExecute:e=>this._chartWidget.model().setProperty(t,e.isChecked(),me)}}))}return e}_contextMenuActionsForFuturesContractExpiration(){const e=[];if(!this._chartWidget.readOnly()){const t=this._chartWidget.model().mainSeries().properties().childs().showFuturesContractExpiration;e.push(new d.Action({actionId:"Chart.ToggleVisibility.ContractExpiration",options:{label:xt,checkable:!0,checked:t.value(),name:"ToggleShowFuturesContractExpirations",statName:"ToggleShowFuturesContractExpirations",onExecute:e=>this._chartWidget.model().setProperty(t,e.isChecked(),Se)}}))}return e}_contextMenuActionsForisLatestUpdates(){const e=[];if(!this._chartWidget.readOnly()){const t=this._chartWidget.model().mainSeries().properties().childs().showLastNews;e.push(new d.Action({actionId:"Chart.ToggleVisibility.LatestNewsAndMinds",options:{label:Rt,checkable:!0,checked:t.value(),name:"ToggleShowLatestUpdates",statName:"ToggleShowLatestUpdates",onExecute:e=>this._chartWidget.model().setProperty(t,e.isChecked(),ye)}}))}return e}_contextMenuActionsForKeyFactsToday(){const e=[];if(!this._chartWidget.readOnly()){const t=this._chartWidget.model().mainSeries().properties().childs().showKeyFactsToday;e.push(new d.Action({actionId:"Chart.ToggleVisibility.KeyFactsToday",options:{label:Et,checkable:!0,checked:t.value(),name:"ToggleShowKeyFactsToday",statName:"ToggleShowKeyFactsToday",onExecute:e=>this._chartWidget.model().setProperty(t,e.isChecked(),fe)}}))}return e}_contextMenuActionsForPublishedTimeline(e){const t=this._chartWidget.actions(),n=[];if(n.push(t.lineHide),window.is_authenticated){const t=e.properties().childs().filter,o=new d.Action({actionId:"Chart.ShowAllIdeas",options:{checked:t.value()===P.PublishedChartsFilter.None,checkable:!0,label:Vt,name:"ToggleAllIdeas",statName:"ToggleAllIdeas",onExecute:()=>this._chartWidget.model().setProperty(t,P.PublishedChartsFilter.None,ve)}}),i=new d.Action({actionId:"Chart.ShowIdeasOfFollowedUsers",options:{checked:t.value()===P.PublishedChartsFilter.Following,checkable:!0,label:kt,name:"ToggleIdeasOfPeopleAndUser",statName:"ToggleIdeasOfPeopleAndUser",onExecute:()=>this._chartWidget.model().setProperty(t,P.PublishedChartsFilter.Following,be)}}),a=new d.Action({actionId:"Chart.ShowMyIdeasOnly",options:{checked:t.value()===P.PublishedChartsFilter.Private,checkable:!0,label:Ot,name:"ToggleUserIdeas",statName:"ToggleUserIdeas",onExecute:()=>this._chartWidget.model().setProperty(t,P.PublishedChartsFilter.Private,Te)}});n.push(new d.Separator,o,i,a)}return n}_contextMenuActionsForTradingDrawings(e){return e.contextMenuItems()}
async _contextMenuActionsForAlertLabel(e,t){if(E.alertsAvailable&&!this._chartWidget.onWidget()){const{getAlertLabelContextMenuActions:o}=await n.e(46745).then(n.bind(n,697395)),i=(0,S.getLabelsSettingsProperty)().childs().line.childs().visible,a=`chart_alert_context_menu_${null!=t?t:"line"}`,r="chart_alert";return o({alert:e,chartWidget:this._chartWidget,labelExtendProperty:i,analytics:{actionLabel:a,actionSource:r}})}return[]}_contextMenuActionsForChartEvents(e){const t=[];if(l.enabled("property_pages")){const e=new d.Action({actionId:"Chart.Dialogs.ShowGeneralSettings.EventsTab",options:{label:$t,statName:"Format",onExecute:()=>this._chartWidget.showGeneralChartProperties(p.TabNames.events)}});t.push(e)}const n=new d.Action({actionId:"Chart.ToggleVisibility.EconomicEvents",options:{label:Bt,name:"HideEvents",statName:"HideEvents",onExecute:()=>this._chartWidget.model().setProperty(e.properties().childs().visible,!1,we)}});return t.push(n),t}_createApplyToEntireLayoutCommand(e){if(!this._chartWidget.chartWidgetCollection().applyIndicatorsToAllChartsAvailable())return null;const t=this._chartWidget.model().model();if(e.parentSources().length>0)return null;const n=(0,o.ensureNotNull)(t.paneForSource(e)),i=t.paneForSource(t.mainSeries())===n,a=e instanceof $.StudyCompare&&e.priceScale()===t.mainSeries().priceScale()&&(0,o.ensureNotNull)(e.priceScale()).isPercentage(),r=i?void 0:t.panes().indexOf(n);let s=Ut,l=_e,c="AddStudyToEntireLayout";return(0,H.isActingAsSymbolSource)(e)&&(s=Kt,l=Ie,c="AddSymbolToEntireLayout"),(0,h.isStudyStrategy)(e)&&(s=jt,l=Ae,c="AddStrategyToEntireLayout"),(0,h.isFundamentalStudy)(e)&&(s=Ht,l=Ce,c="AddFundamentalToEntireLayout"),new d.Action({actionId:"Chart.AddIndicatorToAllCharts",options:{label:s,statName:c,onExecute:()=>{const n=(0,o.ensureNotNull)((0,U.clipboardDataForSources)(t.id(),[e])),s=this._chartWidget.chartWidgetCollection(),d={isOnMainPane:i,asCompare:a,paneIndex:r};s.applyIndicatorToAllCharts(this._chartWidget,n,d,l)}},id:"applyStudyToEntireLayout"})}_createAddIndicatorToFavoritesCommand(e){const t=e.metaInfo();let o;if((0,D.onWidget)()||(0,h.isCompareOrOverlayStudy)(e))return null;if((0,h.isFundamentalStudy)(e)){const e=(0,oe.extractPineId)(t.fullId);if(!e)return null;o=()=>n.e(69790).then(n.bind(n,257015)).then((({FavoriteFundamentals:t})=>{const n=t.getInstance();return{label:n.isFav(e)?nn:tn,onExecute:()=>n.toggleFavorite(e)}}))}else{const e=t.scriptIdPart,i=t.scriptIdPart||t.id;if(!i)return null;o=()=>Promise.all([n.e(69790).then(n.bind(n,725897)),t.pine&&(0,oe.isCustomPineId)(e)?(0,A.isAuthToGetPineSourceCode)(e,t.pine.version):Promise.resolve(!0)]).then((([{FavoriteScriptsModel:e},t])=>{if(!t)return{label:Xt,disabled:!0};const n=e.getInstance();return{label:n.isFav(i)?en:Xt,onExecute:()=>n.toggleFavorite(i)}}))}return new re.ActionWithStandardIcon({actionId:"Chart.Indicator.AddFavorites",id:"addIndicatorToFavorites",optionsLoader:o,options:{statName:"AddIndicatorToFavorites",iconId:"Indicator.AddToFavorites"}})}}},676962:(e,t,n)=>{n.r(t),n.d(t,{
addSymbolDialogHasOpenedKey:()=>r,showAddSymbolDialog:()=>s});var o=n(457965),i=n(305514),a=n(251954);const r="addSymbolDialogHasOpenedKey";function s(e){(0,o.runOrSigninWithFeature)((()=>{(0,i.showWatchListsDialog)({addSymbols:e,onOpen:l})}),{feature:"watchList",source:"add symbol to watchlist"})}function l(){a.emit(r)}},419283:(e,t,n)=>{n.r(t),n.d(t,{SelectPointMode:()=>o,activePointSelectionMode:()=>G,alignTo45Degrees:()=>Ie,barTimesUnderCursor:()=>Y,beenSetLineToolLastPoint:()=>x,cancelLineTool:()=>ee,cancelledLineTool:()=>D,changeLineStyle:()=>ce,changeLineTool:()=>re,changedLineStyle:()=>U,changedLineTool:()=>O,continueLineTool:()=>X,continuedLineTool:()=>W,copiedLineTool:()=>j,copyLineTool:()=>ue,createLineTool:()=>Q,createdLineTool:()=>F,crosshairLock:()=>T,cursorTool:()=>C,drawOnAllCharts:()=>_e,drawOnAllChartsMode:()=>Ae,emojiTool:()=>_,finishChangingLineTool:()=>se,finishLineTool:()=>de,finishMovingLineTool:()=>ie,finishedChangingLineTool:()=>$,finishedLineTool:()=>K,finishedMovingLineTool:()=>V,hideAllDrawings:()=>ve,hideAllIndicators:()=>be,hideMarksOnBars:()=>we,iconTool:()=>I,init:()=>Se,isDirectionalMovementActive:()=>N,isStudyEditingNow:()=>z,isToolCreatingNow:()=>P,isToolEditingNow:()=>M,isToolMovingNow:()=>L,lockDrawings:()=>Te,moveLineTool:()=>oe,movedLineTool:()=>R,properties:()=>ye,removeLineTool:()=>le,removedLineTool:()=>B,resetToCursor:()=>g,restoreLineTool:()=>he,restoreLineToolState:()=>pe,restoredLineTool:()=>H,restoredLineToolState:()=>q,runOnDrawingStateReady:()=>fe,setLineToolLastPoint:()=>te,startChangingLineTool:()=>ae,startMovingLineTool:()=>ne,startedChangingLineTool:()=>k,startedMovingLineTool:()=>E,stickerTool:()=>A,tool:()=>w,toolIsCursor:()=>h,toolIsMeasure:()=>p});var o,i=n(650151),a=n(998418),r=n(262624),s=n(375397),l=n(566238),d=n(942634),c=n(62802),u=n(251954);function h(e){return"cursor"===e||"arrow"===e||"dot"===e||"performance"===e}function p(e){return"measure"===e}function g(e=!1){if(!e&&m){if(m.childs().stayInDrawingMode.value())return}w.setValue(C.value())}!function(e){e[e.None=0]="None",e[e.Replay=1]="Replay",e[e.Study=2]="Study"}(o||(o={}));let m=null,S=null,f=null,y=null,v=null,b=null;const T=new l.WatchedObject(null),w=new s.WatchedValue,I=new s.WatchedValue,_=new s.WatchedValue,A=new s.WatchedValue,C=new s.WatchedValue,P=new s.WatchedValue(!1),M=new s.WatchedValue(!1),L=new s.WatchedValue(!1),N=new s.WatchedValue(!1),F=new d.Delegate,W=new d.Delegate,D=new d.Delegate,x=new d.Delegate,E=new d.Delegate,R=new d.Delegate,V=new d.Delegate,k=new d.Delegate,O=new d.Delegate,$=new d.Delegate,B=new d.Delegate,K=new d.Delegate,U=new d.Delegate,j=new d.Delegate,H=new d.Delegate,q=new d.Delegate,G=new s.WatchedValue(o.None),z=new s.WatchedValue(!1),Y=new Map;function Z(e,t){const n=t||{value:!1};return t=>{n.value||(n.value=!0,e.fire(t),n.value=!1)}}const J={value:!1},Q=Z(F,J),X=Z(W,J),ee=Z(D,J),te=Z(x,J),ne=Z(E),oe=Z(R),ie=Z(V),ae=Z(k),re=Z(O),se=Z($),le=Z(B),de=Z(K),ce=Z(U,J),ue=Z(j,J),he=Z(H),pe=Z(q);let ge=!1,me=[];function Se(){
ge||(w.setValue(c.getValue("chart.cursorPreference","cursor")),w.subscribe((e=>h(e)&&C.setValue(e)),{callWithLast:!0}),C.subscribe((e=>{e&&"performance"!==e&&c.setValue("chart.cursorPreference",e)})),m=new r.DefaultProperty({defaultName:"drawings"}),S=(0,a.createPrimitiveProperty)(!1),f=(0,a.createPrimitiveProperty)(!1),y=(0,a.createPrimitiveProperty)(!1),v=(0,a.createPrimitiveProperty)(!c.getBool("BarsMarksContainer.visibile",!0)),b=(0,a.createPrimitiveProperty)(!1),w.subscribe((e=>{(0,u.emit)("onSelectedLineToolChanged")})),ge=!0,me.forEach((e=>e())),me=[])}function fe(e){ge?e():me.push(e)}function ye(){return(0,i.ensureNotNull)(m)}function ve(){return(0,i.ensureNotNull)(S)}function be(){return(0,i.ensureNotNull)(f)}function Te(){return(0,i.ensureNotNull)(y)}function we(){return(0,i.ensureNotNull)(v)}function Ie(){return(0,i.ensureNotNull)(b)}function _e(){return ye().childs().drawOnAllCharts}function Ae(){return ye().childs().drawOnAllChartsMode}},553220:(e,t,n)=>{n.d(t,{DateFormatter:()=>a});var o=n(339709),i=n(246125);class a{constructor(e="yyyy-MM-dd",t=!1){this._dateFormatFunc=t?(0,i.getDateFormatWithWeekday)(e):i.dateFormatFunctions[e]}format(e){return o.customFormatters&&o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!1)}formatLocal(e){return o.customFormatters.dateFormatter?o.customFormatters.dateFormatter.formatLocal?o.customFormatters.dateFormatter.formatLocal(e):o.customFormatters.dateFormatter.format(e):this._dateFormatFunc(e,!0)}parse(e){if(""===e)return{res:!1};let t=e;return o.customFormatters&&o.customFormatters.dateFormatter&&!o.customFormatters.dateFormatter.parse&&console.warn("You need to provide a `parse` function as part of `dateFormatter`"),o.customFormatters&&o.customFormatters.dateFormatter&&o.customFormatters.dateFormatter.parse&&(t=String(o.customFormatters.dateFormatter.parse(e))),{res:!0,value:t}}}},465836:(e,t,n)=>{var o;n.d(t,{cloneLineTool:()=>O,createLineTool:()=>P,createLineToolProperties:()=>L,createStudyLineToolProperties:()=>N,initAllLineToolsFromContent:()=>C,initLineTool:()=>A,isBrushBasedLineTool:()=>D,isEditableTextLineTool:()=>V,isLineTool:()=>W,isStudyLineTool:()=>x,isTrading:()=>E,lineToolByLinkKey:()=>$,prepareLineToolPropertiesByOwnerSource:()=>M,setNewToolProperties:()=>T,supportsPhantomMode:()=>F,tryFindStudyLineToolNameByStudyId:()=>k,unsetNewToolProperties:()=>w});var i=n(182433),a=n(650151),r=n(86441),s=n(412788),l=n(609466),d=n(929927),c=n(954877),u=n(926799),h=n(975179),p=n(627620),g=n(850723),m=n(850986),S=n(219774);const f={},y={};Object.assign(f,o||(o=n.t(c,2)));const v=["LineToolRegressionTrend","LineToolAnchoredVWAP","LineToolFixedRangeVolumeProfile","LineToolVbPFixed"];v.push("LineToolAnchoredVolumeProfile");let b=null;function T(e,t,n){return null!==b&&b.tool===e&&b.toolData===t||(b={properties:L(e,void 0,n),tool:e,toolData:t}),b.properties}function w(){b=null}
const I=new Map([["LineToolPriceNote",async()=>(await Promise.all([n.e(63384),n.e(77916),n.e(24379),n.e(96501),n.e(90108),n.e(380)]).then(n.bind(n,875943))).LineToolPriceNote],["LineToolTextNote",async()=>(await Promise.all([n.e(41601),n.e(77916),n.e(24379),n.e(96501),n.e(90108),n.e(92384),n.e(89123)]).then(n.bind(n,582703))).LineToolTextNote],["LineToolNote",async()=>(await Promise.all([n.e(51081),n.e(77916),n.e(24379),n.e(96501),n.e(90108),n.e(92384),n.e(23248)]).then(n.bind(n,834447))).LineToolNote],["LineToolFibSpiral",async()=>(await Promise.all([n.e(90646),n.e(77916),n.e(24379),n.e(96501),n.e(90108),n.e(78090)]).then(n.bind(n,45244))).LineToolFibSpiral],["LineToolCircleLines",async()=>(await Promise.all([n.e(31440),n.e(77916),n.e(24379),n.e(96501),n.e(90108),n.e(59445)]).then(n.bind(n,763389))).LineToolCyclicLines]]);let _=new Map;async function A(e){if((0,p.isStudyLineToolName)(e)){if(await(0,g.studyMetaInfoRepository)().findAllJavaStudies(),y[e])return;const t=(0,a.ensureDefined)(_.get(e));return void(y[e]=await t())}if(f[e])return;if(!f.hasOwnProperty(e))return;const t=(0,a.ensureDefined)(I.get(e));f[e]=await t()}async function C(e){if(!e)return;const t=new Set;("charts"in e?e.charts:[e]).forEach((e=>{e.panes.forEach((e=>{e.sources.forEach((e=>{(0,p.isLineToolName)(e.type)&&t.add(e.type)}))}))})),await Promise.all(Array.from(t).map((e=>A(e))))}function P(e,t,n,o,i,r){var s;let l;if((0,a.assert)((0,p.isLineToolName)(e),"Unknown line tool: "+e),i||n||(s=e,n=(null!==b&&b.tool===s?b.properties:null)||void 0),v.includes(e)){l=new((0,a.ensureDefined)(y[e]))(t,n,(0,a.ensureDefined)(o),i,r)}else{l=new((0,a.ensureDefined)(f[e]))(t,n,i,r)}return l.toolname=e,w(),l}function M(e,t){const n=(0,a.ensureNotNull)(t.symbolSource()),o=n.symbolInfo(),i=o?(0,h.extractLineToolSymbolFromSymbolInfo)(o,n.symbol()):n.symbol();e.childs().symbol.setValue(i),n.model().currencyConversionEnabled()&&n.isConvertedToOtherCurrency()&&e.childs().currencyId.setValue(n.currency()),n.model().unitConversionEnabled()&&n.isConvertedToOtherUnit()&&e.childs().unitId.setValue(n.unit()),e.childs().symbolStateVersion.setValue(2),e.childs().zOrderVersion.setValue(2)}function L(e,t,n,o){if((0,a.assert)((0,p.isLineToolName)(e),`${e} should be name of the line tool`),v.includes(e)){return(0,a.ensureDefined)(y[e]).createProperties(t)}return(0,a.ensureDefined)(f[e]).createProperties(t,o)}function N(e,t,n,o,i){if((0,a.assert)((0,p.isStudyLineToolName)(e),`${e} should be name of the study line tool`),v.includes(e)){return(0,a.ensureDefined)(y[e]).createPropertiesFromStudyMetaInfoAndState(t,n,o,i)}throw new Error(`Property creation is not implemented for study line tool ${e}`)}function F(e){(0,a.assert)((0,p.isLineToolName)(e),`${e} should be name of the line tool`);const t=(o||(o=n.t(c,2)))[e];return void 0!==t&&Boolean(t.supportPhantomMode)}function W(e){return e instanceof d.LineDataSource}function D(e){return e instanceof S.LineToolBrushBase}function x(e){return e instanceof l.StudyLineDataSource}function E(e){return e instanceof u.LineToolTrading}
I.set("LineToolNoteAbsolute",(async()=>(await Promise.all([n.e(51081),n.e(77916),n.e(24379),n.e(96501),n.e(90108),n.e(92384),n.e(23248)]).then(n.bind(n,834447))).LineToolNoteAbsolute)),I.set("LineToolTable",(async()=>(await Promise.all([n.e(85529),n.e(77916),n.e(24379),n.e(96501),n.e(90108),n.e(30319)]).then(n.bind(n,534242))).LineToolTable)),_=new Map([["LineToolAnchoredVWAP",async()=>(await Promise.all([n.e(92013),n.e(10640),n.e(55500)]).then(n.bind(n,427322))).LineToolAnchoredVWAP],["LineToolRegressionTrend",async()=>(await n.e(99748).then(n.bind(n,741274))).LineToolRegressionTrend],["LineToolVbPFixed",async()=>(await Promise.all([n.e(10640),n.e(95695)]).then(n.bind(n,335248))).LineToolVbPFixed],["LineToolFixedRangeVolumeProfile",async()=>(await Promise.all([n.e(10640),n.e(95695)]).then(n.bind(n,573486))).LineToolFixedRangeVolumeProfile],["LineToolAnchoredVolumeProfile",async()=>(await Promise.all([n.e(10640),n.e(95695)]).then(n.bind(n,176592))).LineToolAnchoredVolumeProfile]]);const R=["editableTextStyle","editableText","editableTextProperties"];function V(e){return(0,i.default)(e)&&R.every((t=>t in e))}function k(e){let t=null;return e===m.lineToolsStudyIds.LineToolRegressionTrend?t="LineToolRegressionTrend":e===m.lineToolsStudyIds.LineToolVbPFixed?t="LineToolVbPFixed":e===m.lineToolsStudyIds.LineToolFixedRangeVolumeProfile&&(t="LineToolFixedRangeVolumeProfile"),t}function O(e,t,n,o){const i=t.toolname,l=t.properties().state();l.intervalsVisibilities=(0,s.mergeIntervalVisibilitiesDefaults)(null==l?void 0:l.intervalsVisibilities);const d=L(t.toolname,l);d.childs().visible.setValue(!0);const c=(0,a.ensureNotNull)(t.ownerSource()),u=P(i,e,d);void 0!==o&&u.setId(o),u.setOwnerSource(c),u.toolname=i;const h=u.clonePositionOffset();if(t.isFixed()){const e=(0,a.ensureDefined)(t.fixedPoint()),o=n?e.add(new r.Point(h.xCoordOffset,h.yCoordOffset)):e;u.addFixedPoint(o)}const p=t.normalizedPoints(),g=n?function(e,t,n){const o=(0,a.ensureNotNull)(t.priceScale()),i=(0,a.ensureNotNull)(t.firstValue());return e.map((e=>{const t=e.price,a=o.priceToCoordinate(t,i)+n.yCoordOffset,r=o.coordinateToPrice(a,i),s=e.interval;return{time_t:e.time_t,price:r,offset:e.offset+n.barOffset,interval:s}}))}(p,c,h):p,m=t.points();return u.restorePoints(g,m),u.cloneData&&u.cloneData(t),u.recalculateStateByData&&u.recalculateStateByData(),u}function $(e,t){var n;return null!==(n=e.dataSources().find((e=>W(e)&&e.linkKey().value()===t)))&&void 0!==n?n:null}},195121:(e,t,n)=>{n.d(t,{magnetEnabled:()=>g,magnetMode:()=>m,setIsMagnetEnabled:()=>S,setMagnetMode:()=>f});var o=n(262624),i=n(375397),a=n(205899),r=n(419283),s=n(627620),l=n(895366);const d=new i.WatchedValue(!1),c=new i.WatchedValue(a.MagnetMode.WeakMagnet),u=(0,l.modifierPressed)(),h=(0,l.shiftPressed)();function p(){const e=u.value();if(h.value()&&(r.isToolEditingNow.value()||r.isToolCreatingNow.value()))return void d.setValue(!1);let t,n;if(r.activePointSelectionMode.value()===r.SelectPointMode.Replay)t=n=!1;else{
const o=r.tool.value(),i=r.isStudyEditingNow.value()||r.activePointSelectionMode.value()===r.SelectPointMode.Study;t=e&&((0,s.isLineToolName)(o)||r.isToolEditingNow.value()||(0,r.toolIsMeasure)(o)||i),n=(0,r.properties)().childs().magnet.value()}c.setValue(!n&&t?a.MagnetMode.StrongMagnet:(0,r.properties)().childs().magnetMode.value()),d.setValue(t?!n:n)}function g(){return d}function m(){return c}function S(e){(0,o.allowSavingDefaults)(!0),(0,r.properties)().childs().magnet.setValue(e),(0,o.allowSavingDefaults)(!1)}function f(e){(0,o.allowSavingDefaults)(!0),(0,r.properties)().childs().magnetMode.setValue(e),(0,r.properties)().childs().magnet.setValue(!0),(0,o.allowSavingDefaults)(!1)}(0,r.runOnDrawingStateReady)((()=>{(0,r.properties)().childs().magnet.subscribe(null,p),(0,r.properties)().childs().magnetMode.subscribe(null,p),u.subscribe(p),h.subscribe(p),r.tool.subscribe(p),r.isToolEditingNow.subscribe(p),p()}))},395394:(e,t,n)=>{n.d(t,{compareResolutions:()=>S,convertResolutionsFromSettings:()=>L,getApplicableIntervalForFrequency:()=>f,getDefaultResolution:()=>_,getMaxResolutionValue:()=>M,getResolutionByChartStyle:()=>A,getTranslatedResolution:()=>W,getTranslatedResolutionModel:()=>D,intervalIsSupported:()=>O,isAvailable:()=>w,isIntervalEnabled:()=>k,isResolutionMultiplierValid:()=>C,isSecondsEnabled:()=>E,isTicksEnabled:()=>R,mergeResolutions:()=>N,normalizeIntervalString:()=>T,setLastUsedResolution:()=>I,sortResolutions:()=>F});var o=n(444372),i=n(378975),a=n(975179),r=n(62802),s=n(583912),l=n(523863),d=n(638456),c=n(125226),u=n(124829),h=n(764829);const p={[i.ResolutionKind.Ticks]:1,[i.ResolutionKind.Seconds]:60,[i.ResolutionKind.Minutes]:1440,[i.SpecialResolutionKind.Hours]:24,[i.ResolutionKind.Days]:365,[i.ResolutionKind.Weeks]:52,[i.ResolutionKind.Months]:12,[i.ResolutionKind.Range]:1e6,[i.ResolutionKind.Invalid]:NaN},g={[i.ResolutionKind.Ticks]:0,[i.ResolutionKind.Seconds]:1,[i.ResolutionKind.Minutes]:2,[i.SpecialResolutionKind.Hours]:3,[i.ResolutionKind.Days]:4,[i.ResolutionKind.Weeks]:5,[i.ResolutionKind.Months]:6,[i.ResolutionKind.Range]:7,[i.ResolutionKind.Invalid]:8};function m(e){const t=i.Interval.parse(e),n=t.multiplier()||1;return t.isMinuteHours()?[i.SpecialResolutionKind.Hours,n/60]:[t.kind(),n]}function S(e,t){if(e===t)return 0;const[n,o]=m(e),[i,a]=m(t);return n!==i?g[n]-g[i]:o-a}function f(e,t){return S(t,e)>=0?t:e}const y=[1,5,10,15,30,45],v=[1,10,100,1e3],b=(0,c.isFeatureEnabled)("tick_intervals")&&!(0,d.onWidget)();function T(e){return i.Interval.parse(e).value()}function w(e){const t=i.Interval.parse(e);if(t.isRange())return s.linking.range.value();if(!R()&&t.isTicks())return!1;const n=t.value(),o=s.linking.dataFrequencyResolution.value();if(void 0!==o&&S(n,o)<0)return!1;const a=s.linking.supportedResolutions.value();return void 0!==a?void 0!==a.find((e=>T(e)===n)):t.isTicks()?Boolean(s.linking.ticks.value()):t.isIntraday()?Boolean(s.linking.intraday.value()):t.isDWM()}function I(e){
i.Interval.isValid(e)&&(i.Interval.isRange(e)?r.setValue("chart.lastUsedRangeResolution",e):r.setValue("chart.lastUsedTimeBasedResolution",e))}function _(e){return e?"100R":"1D"}function A(e,t,n){const o=a.isRangeStyle(e),s=i.Interval.isRange(t);return!o&&s?function(e){const t=r.getValue("chart.lastUsedTimeBasedResolution");if(void 0!==t&&i.Interval.isTimeBased(t))return t;let n="1D";for(const t of e){const e=i.Interval.parse(t);if(e.isTimeBased()){const t=e.value();if("1D"===t)return t;n=t}}return n}(n):o&&!s?function(e){const t=r.getValue("chart.lastUsedRangeResolution");if(void 0!==t&&i.Interval.isRange(t))return t;let n="100R";for(const t of e){const e=i.Interval.parse(t);if(e.isRange()){const t=e.value();if("100R"===t)return t;n=t}}return n}(n):t}function C(e){const{interval:t,guiResolutionKind:n}=i.Interval.parseExt(e);if(!t.isValid())return!1;const o=t.multiplier();if(n===i.ResolutionKind.Seconds)return y.includes(o);if(b&&n===i.ResolutionKind.Ticks)return v.includes(o);return(n===i.SpecialResolutionKind.Hours?o/60:o)<=P(n)}function P(e){const t=p[e];return Number.isNaN(t)?1:t}function M(e){return P(i.Interval.parseExt(e).guiResolutionKind)}function L(e){return Array.isArray(e)?e:Object.keys(e).map(i.Interval.normalize).filter(u.notNull)}function N(...e){let t=[].concat(...e);return t=(0,l.uniq)(t.filter(C).map(T)),F(t)}function F(e){return e.sort(S)}function W(e){const{multiplier:t,shortKind:n}=D(e);return`${t}${n}`}function D(e,t){const n=i.Interval.parse(e);let o=n.multiplier(),a=n.kind();if(!n.isValid()){if(t)return null;throw new TypeError(`Can't translate invalid interval: ${e}`)}return n.isMinuteHours()&&(o=Math.floor(o/60),a=i.SpecialResolutionKind.Hours),{multiplier:o.toString(),shortKind:x(a),hint:`${o} ${x(a,o)}`,mayOmitMultiplier:n.isDWM()&&1===o,mayOmitShortKind:n.isMinutes()&&!n.isMinuteHours()}}function x(e,t){if(!t)return{[i.ResolutionKind.Invalid]:"",[i.ResolutionKind.Ticks]:o.t(null,{context:"interval_short"},n(882901)),[i.ResolutionKind.Seconds]:o.t(null,{context:"interval_short"},n(968823)),[i.ResolutionKind.Minutes]:o.t(null,{context:"interval_short"},n(768430)),[i.SpecialResolutionKind.Hours]:o.t(null,{context:"interval_short"},n(438048)),[i.ResolutionKind.Days]:o.t(null,{context:"interval_short"},n(38691)),[i.ResolutionKind.Weeks]:o.t(null,{context:"interval_short"},n(307408)),[i.ResolutionKind.Months]:o.t(null,{context:"interval_short"},n(977995)),[i.ResolutionKind.Range]:o.t(null,{context:"interval_short"},n(993934))}[e];switch(e){case i.ResolutionKind.Ticks:return o.t(null,{plural:"ticks",count:t},n(111913));case i.ResolutionKind.Days:return o.t(null,{plural:"days",count:t},n(641807));case i.ResolutionKind.Weeks:return o.t(null,{plural:"weeks",count:t},n(448898));case i.ResolutionKind.Months:return o.t(null,{plural:"months",count:t},n(898393));case i.ResolutionKind.Seconds:return o.t(null,{plural:"seconds",count:t},n(33232));case i.ResolutionKind.Minutes:return o.t(null,{plural:"minutes",count:t},n(378318));case i.SpecialResolutionKind.Hours:return o.t(null,{plural:"hours",count:t
},n(942328));case i.ResolutionKind.Range:return o.t(null,{plural:"ranges",count:t},n(189937));default:return e}}function E(){return!0}function R(){return b}function V(e){return!(!R()&&e.isTicks())}function k(e){return V(i.Interval.parse(e))}function O(e){if(h.enabled("allow_supported_resolutions_set_only")){const t=i.Interval.normalize(e);return null!==t&&w(t)}{const t=i.Interval.parse(e);if(!t.isValid()||!V(t))return!1;if(!h.enabled("custom_resolutions")){const t=i.Interval.normalize(e),n=window.ChartApiInstance.defaultResolutions().filter(k);if(!t||-1===n.indexOf(t))return!1}const n=s.linking.dataFrequencyResolution.value();if(void 0!==n&&f(n,t.value())!==t.value())return!1;if(t.isRange())return s.linking.range.value();if(t.isTicks())return s.linking.ticks.value();if(t.isIntraday())return s.linking.intraday.value();{const e=s.linking.supportedResolutions.value();return!e||e.includes(t.value())}}}},745397:(e,t,n)=>{n.d(t,{generateSplitTitleForGui:()=>h,generateTitleForGui:()=>p});var o=n(259332),i=n(650151),a=n(444372),r=n(953969),s=n(151848),l=n(255866);function d(e,t){return(Math.round(e*Math.pow(10,t))/Math.pow(10,t)).toString()||""}function c(e){var t;switch(e.style){case"ATR":return a.t(null,{context:"input",replace:{atrValue:String(e.atrLength)}},n(550873));case"PercentageLTP":return a.t(null,{context:"input",replace:{percentageLTPValue:String(e.percentageLTP)}},n(273425));case"Traditional":return a.t(null,{context:"input"},n(640566));default:return null!==(t=e.style)&&void 0!==t?t:""}}const u=(0,o.default)((e=>{const[,t="",n="",o="",i=""]=Array.from(e.match(/^(\d\d)(\d\d)-(\d\d)(\d\d)/)||[]);return`${t}:${n}−${o}:${i}`}));function h(e){const t="QUANDL"===(e=e||{}).exchange,o={title:"",description:"",interval:"",exchange:"",provider:"",chartStyle:"",sessionDescription:"",priceSource:""};let h="";if(e.description&&t)if(2===e.description.split("/").length)h=e.description.split("/")[1];else{e.description.split("'").filter((e=>e.length)).forEach((e=>{let t=[];t=e&&("/"===e[0]||/\d+\/\(?/.test(e))?[e]:e.split("/").filter((e=>e.length)),h+=t[2===t.length?1:0]}))}else h=e.description?e.description:e.symbol;if(e.ticker?(o.title=e.ticker,o.description=g(h)):o.title=g(h),e.interval&&(o.interval=(0,s.translatedIntervalString)(e.interval)),t&&e.description){const t=/[\w_]+\/[\w_]+/.exec(e.description);t&&t[0]?o.provider=g(t[0].split("/")[0]):o.provider=g(e.description.split("/")[0])}return e.exchange&&(o.exchange=g(e.exchange)),o.chartStyle=g(function(e){const t=e.inputs;switch(e.style){case 4:const o=c(t),s=(0,i.ensureDefined)(e.boxSize||t.boxSize);return`${a.t(null,void 0,n(188130))} [${o}, ${d(s,4)}]`;case 7:return`${a.t(null,void 0,n(469576))} [${t.lb}]`;case 5:const h=c(t),p=e.reversalAmount||t.reversalAmount,g=void 0!==p?`, ${d(p,8)}`:"";return`${a.t(null,void 0,n(383490))} [${h}${g}]`;case 6:const m=c(t),S=e.boxSize||t.boxSize;return`${a.t(null,void 0,n(560963))} [${m}, ${d((0,i.ensureDefined)(S),8)}, ${t.reversalAmount}]`;case 18:
return`${a.t(null,void 0,n(604545))} [${t.periodsNum}, ${t.period}, ${t.blockSize}, ${t.ticksPerRow}]`;case 17:{const e="Auto"===t.rowSize?`ATR ${t.atrLength}`:`Manual ${t.ticksPerRow}`;let o;switch((0,i.ensureDefined)(t.type)){case l.VolumeFootprintTypeValues.BuyAndSell:o=a.t(null,void 0,n(388016));break;case l.VolumeFootprintTypeValues.Delta:o=a.t(null,void 0,n(571073));break;case l.VolumeFootprintTypeValues.Total:o=a.t(null,void 0,n(408007))}return`${a.t(null,void 0,n(292763))} [${e}, ${o}]`}case 20:{const e=(0,r.getTranslatedInputTitle)((0,i.ensureDefined)(t.profilesSessions)),o=(0,r.getTranslatedInputTitle)((0,i.ensureDefined)(t.volume)),s=(0,r.getTranslatedInputTitle)((0,i.ensureDefined)(t.rowsLayout));let l="";return"All"!==t.profilesSessions&&(l=`${u((0,i.ensureDefined)(t.customSession))}, ${t.customSessionTZ}, `),`${a.t(null,void 0,n(226590))} [${e}, ${l}${o}, ${t.vaVolume}, ${s}, ${t.rows}]`}}return 11===e.style?a.t(null,void 0,n(855169)):8===e.style?a.t(null,void 0,n(863876)):""}(e)),e.sessionDescription&&(o.sessionDescription=g(e.sessionDescription)),void 0!==e.priceSource&&(o.priceSource=g(e.priceSource)),o}function p(e){const t=h(e);return(e.ticker?t.description:t.title)+(t.interval?", "+t.interval:"")+function(e,t=", "){return(e.provider?`${t}${e.provider}`:"")+(e.exchange?`${t}${e.exchange}`:"")+(e.chartStyle?`${t}${e.chartStyle}`:"")+(e.branding?`${t}${e.branding}`:"")+(e.sessionDescription?`${t}${e.sessionDescription}`:"")+(e.priceSource?`${t}${e.priceSource}`:"")}(t)}function g(e){return e.replace(/'/g,"")}},434396:(e,t,n)=>{n.d(t,{createStudy:()=>T,hasConfirmInputs:()=>A,isCompareOrOverlayStudy:()=>v,isESDStudy:()=>S,isFundamentalStudy:()=>m,isOverlayStudy:()=>y,isRollDatesStudy:()=>f,isStudy:()=>u,isStudyStrategy:()=>p,isStudyStub:()=>g,isSymbolicStudy:()=>P,studyColorRotationMode:()=>w,useSameColorRotationComparator:()=>_});var o=n(650151),i=(n(764829),n(637761)),a=n(872842),r=n(296842),s=n(879938),l=n(903424);const d=(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,689052)).then((e=>e.Study))));(0,s.addStudyInfoToMap)("Study",d),(0,s.addStudyInfoToMap)("study_PivotPointsStandard",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,332764)).then((e=>e.study_PivotPointsStandard))))),(0,s.addStudyInfoToMap)("study_Overlay",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.t.bind(n,120269,19)).then((e=>e.study_Overlay))),"sexyColors")),(0,s.addStudyInfoToMap)("study_Compare",(0,
s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,622161)).then((e=>e.StudyCompare))),"sexyColors")),(0,s.addStudyInfoToMap)("study_Volume",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,242829)).then((e=>e.VolumeStudy))))),(0,s.addStudyInfoToMap)("study_VbPVisible",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VbPVisibleWrapper))),"noRotations")),(0,s.addStudyInfoToMap)("study_VbPFixed",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VolumeProfileStudyWithThemedColors))),"noRotations")),(0,s.addStudyInfoToMap)("study_ScriptWithDataOffset",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,654638)).then((e=>e.study_ScriptWithDataOffset))))),(0,s.addStudyInfoToMap)("study_Earnings",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,266298)).then((e=>e.study_ESD$TV_EARNINGS))))),(0,s.addStudyInfoToMap)("study_Splits",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,266298)).then((e=>e.study_ESD$TV_SPLITS))))),(0,s.addStudyInfoToMap)("study_Dividends",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,266298)).then((e=>e.study_ESD$TV_DIVIDENDS))))),(0,s.addStudyInfoToMap)("study_BarSetContinuousRollDates",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,517802)).then((e=>e.study_ESD$TV_ROLLDATES))))),(0,s.addStudyInfoToMap)(r.fundamentalsPrefix,(0,
s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,962608)).then((e=>e.Fundamental))),"loop",((e,t)=>(0,r.isFundamentalStudyMetaInfo)(t)))),(0,s.addStudyInfoToMap)("study_ElliottWave",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.t.bind(n,213079,19)).then((e=>e.study_ElliottWave))))),(0,s.addStudyInfoToMap)("study_LinearRegression",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,496327)).then((e=>e.LinearRegressionStudy))))),(0,s.addStudyInfoToMap)("study_PivotPointsHighLow",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.t.bind(n,65246,19)).then((e=>e.study_PivotPointsHighLow))))),(0,s.addStudyInfoToMap)("study_VbPSessions",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,2781)).then((e=>e.SessionVolumeStudy))),"noRotations")),(0,s.addStudyInfoToMap)("study_VbPPeriodic",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VolumeProfileWithPriceRangeStudy))),"noRotations")),(0,s.addStudyInfoToMap)("study_VbPSessionsRoughDetailed",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,990627)).then((e=>e.SessionVolume2Study))),"noRotations")),(0,s.addStudyInfoToMap)("study_ZigZag",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.t.bind(n,550599,19)).then((e=>e.study_ZigZag))))),(0,s.addStudyInfoToMap)("study_VbPAutoAnchored",(0,
s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,759332)).then((e=>e.VolumeProfileStudyWithThemedColors))),"noRotations")),(0,s.addStudyInfoToMap)("study_TPOPeriodic",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,997253)).then((e=>e.TpoPeriodicStudy))))),(0,s.addStudyInfoToMap)("study_TPOSessions",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,563371)).then((e=>e.TpoSessionsStudy))))),(0,s.addStudyInfoToMap)("study_VolumeFootprint",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,586043)).then((e=>e.VolumeFootprintStudy))))),(0,s.addStudyInfoToMap)("StudyStrategy",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,395104)).then((e=>e.StudyStrategy))))),(0,s.addStudyInfoToMap)("ReplayStudyStrategy",(0,s.createStudyInfo)((()=>Promise.all([n.e(87224),n.e(32887),n.e(24951),n.e(87557),n.e(77916),n.e(92013),n.e(88509),n.e(89052),n.e(10640),n.e(58722),n.e(87),n.e(19024),n.e(42445),n.e(61139),n.e(93255),n.e(13399),n.e(57539)]).then(n.bind(n,912291)).then((e=>e.ReplayStudyStrategy)))));const c=["getStudyName","guiPlotName","isLinkedToSeries"];function u(e){return c.every((t=>t in e))}const h=["strategyOrdersPaneView","ordersData","reportData"];function p(e){return u(e)&&h.every((t=>t in e))}function g(e){return e instanceof a.StudyStub}function m(e){return u(e)&&(0,r.isFundamentalStudyMetaInfo)(e.metaInfo())}function S(e){return e instanceof l.DataSource&&("ESD$TV_EARNINGS"===e.id()||"ESD$TV_SPLITS"===e.id()||"ESD$TV_DIVIDENDS"===e.id())}function f(e){return e instanceof l.DataSource&&"ESD$TV_ROLLDATES"===e.id()}function y(e){return u(e)&&"Overlay@tv-basicstudies"===e.metaInfo().id}function v(e){return y(e)||u(e)&&"Compare@tv-basicstudies"===e.metaInfo().id}let b=0;async function T(e,t,n,a,l,c){var u;let h;const p=2===c;if(i.StudyMetaInfo.isReplayStrategy(a)&&(h=(0,s.getStudyInfoByName)("ReplayStudyStrategy")),i.StudyMetaInfo.isScriptStrategy(a)&&(h=(0,s.getStudyInfoByName)("StudyStrategy")),!h){const e=(0,r.studyNameByMetaInfo)(a);h=null!==(u=(0,s.getStudyInfoByName)(null!=e?e:"Study"))&&void 0!==u?u:d}h.studyConstructor||(b+=1,h.studyConstructor=await(0,
o.ensureDefined)(h.studyConstructorAsyncGetter)(),b-=1);const g=new((0,o.ensureDefined)(null==h?void 0:h.studyConstructor))(e,t,n,a,p);return void 0!==l&&g.setId(l),g}function w(e){const t=(0,r.studyNameByMetaInfo)(e),n=(0,s.getStudyInfoByName)(t);return n?n.colorRotationMode:void 0===e.pine||i.StudyMetaInfo.isStandardPine(e.id)?1!==e.plots.length?"shift":"loop":null}function I(e,t){return e.id===t.id&&(o=t,((n=e).pine?n.pine.version:void 0)===(o.pine?o.pine.version:void 0));var n,o}function _(e){const t=(0,r.studyNameByMetaInfo)(e),n=(0,s.getStudyInfoByName)(t);if(n){const e=n.colorRotationComparator;if(void 0!==e)return e}return I}function A(e){return(null!=e?e:[]).some((e=>e.confirm))}const C=["Overlay@tv-basicstudies","CorrelationCoefficient@tv-basicstudies","Correlation Coeff@tv-basicstudies","Spread@tv-basicstudies","Ratio@tv-basicstudies"];function P(e){return C.includes(e.id)}},850723:(e,t,n)=>{n.d(t,{emptyPineId:()=>m,isStudyDescriptor:()=>S,studyMetaInfoRepository:()=>b});var o=n(412235),i=n(444372),a=n(650151),r=n(637761),s=n(874546),l=n(306060),d=n(500323),c=n(870408),u=n(401843),h=n(338619),p=n(955273);const g=(0,h.getLogger)("Chart.Studies.StudyMetaInfoRepository",{color:"#606"}),m="";function S(e){return"object"==typeof e&&null!==e&&"type"in e&&("java"===e.type&&"studyId"in e||"pine"===e.type&&"pineId"in e)}class f{constructor(e){this._isReady=!1,this._studyVersioning=null,this._rawStudiesMetaInfo=[],this._rawStudiesMetaInfoDeferredPromise=null,this._javaStudiesMetaInfo=[],this._pineMetaInfoCache=[],this._compileErrors=new WeakMap,this._studiesMigrations=[],this._chartApi=e}async requestMetaInfo(){if(null===this._rawStudiesMetaInfoDeferredPromise){this._rawStudiesMetaInfoDeferredPromise=(0,p.createDeferredPromise)();const e=await this._chartApi.requestMetadata(),t=e.params[1].metainfo.slice();{const n=e.params[1].migrations.slice();this._processSiteMetaInfo(t,n)}this._studyVersioning=new d.StudyVersioning(this._javaStudiesMetaInfo,this._studiesMigrations),this._requestFinished(),this._rawStudiesMetaInfoDeferredPromise.resolve(this._rawStudiesMetaInfo)}return this._rawStudiesMetaInfoDeferredPromise.promise}async findById(e){this._isReady||await this.requestMetaInfo();const t=this._findStudyMetaInfo(e);if(null!==t){const e=this._compileErrors.get(t);return e?Promise.reject(e):Promise.resolve(t)}return"pine"===e.type?this._compilePine(e):Promise.reject(`unexpected study id=${e.studyId} with type=${e.type}`)}findByIdSync(e){return this._findStudyMetaInfo(e)}isReady(){return this._isReady}async findAllJavaStudies(){return this._isReady||await this.requestMetaInfo(),this._javaStudiesMetaInfo}studyVersioning(){return(0,a.ensureNotNull)(this._studyVersioning)}getInternalMetaInfoArray(){return this._javaStudiesMetaInfo}addPineMetaInfo(e,t){const n=v(this._pineMetaInfoCache,e);return t&&(!Array.isArray(t)||t.length>0)&&(t=Array.isArray(t)?new u.PineCompileFailErrorImpl({warnings:[],errors:t},e):t,this._compileErrors.set(n,t)),n}async getLatestMetaInfoForPineStudy(e,t){const n=await(0,c.requestUserScripts)()
;let o;if(n){const i=n.find((t=>t.scriptIdPart===e));if(i){const e=l.Version.parse(t),n=l.Version.parse(i.version);e.isLess(n)&&(o=i.version)}}if(void 0!==o){const t={type:"pine",pineId:e,pineVersion:o};return this.findById(t)}return null}_processMigrations(e){this._studiesMigrations=[];for(let t=0;e&&t<e.length;t++)this._studiesMigrations.push(e[t])}_processSiteMetaInfo(e,t){for(const t of e)d.StudyVersioning.verifyInputsMaxValue(t),y(t);this._rawStudiesMetaInfo=e,this._processMigrations(t);for(const e of this._rawStudiesMetaInfo)v(this._javaStudiesMetaInfo,e);r.StudyMetaInfo.overrideDefaults(this._javaStudiesMetaInfo)}_processLibraryMetaInfo(e){}_requestFinished(){this._isReady=!0}_findStudyMetaInfo(e){return"java"===e.type?((0,a.assert)(0!==this._javaStudiesMetaInfo.length,"Java studies metainfo should be define here"),this._javaStudiesMetaInfo.find((t=>t.id===e.studyId))||null):this._pineMetaInfoCache.find((t=>t.scriptIdPart===e.pineId&&(void 0===e.pineVersion||(0,a.ensureDefined)(t.pine).version===e.pineVersion)))||null}_compilePine(e){g.logNormal(`Compiling ${e.pineId} script`);const t=(0,c.translateScriptAsync2)(e.pineId,e.pineVersion||"last").then((({metaInfo:t,compileErrors:n})=>(g.logNormal(`Compiling ${e.pineId} is successful`),this.addPineMetaInfo((0,a.ensureDefined)(t),n.errors))));return t.catch((t=>{t instanceof u.PineCompileFailErrorImpl&&this.addPineMetaInfo(t.metaInfo,t),g.logNormal(`Compiling ${e.pineId} is failed`)})),t}}function y(e){e.description_localized=i.t(e.description,{context:"study"},n(783477))}function v(e,t){const n=new r.StudyMetaInfo(t).state();(0,s.migrateMetaInfoAndPropState)(n);const o=new r.StudyMetaInfo(n);let i=!0;const a=e.findIndex((e=>e.id===o.id));if(-1===a)e.push(o);else{const t=e[a],n=void 0!==t.pine?l.Version.parse(t.pine.version):null,r=void 0!==o.pine?l.Version.parse(o.pine.version):null;null===r||null===n||r.isGreaterOrEqual(n)?(t.removeDefaults(),e[a]=o):i=!1}return i&&o.createDefaults(),o}const b=(0,o.default)((()=>new f(window.ChartApiInstance)))},459423:(e,t,n)=>{n.d(t,{setSupportPortalProblemsHost:()=>i,supportPortalProblemsHost:()=>o});let o="";function i(e){o=e}},257288:(e,t,n)=>{n.d(t,{getTranslatedSymbolDescription:()=>a});var o=n(444372);function i(e){const t=`#${e}-symbol-description`,i=o.t(t,void 0,n(956316));return i===t?null:i}function a(e){if(void 0!==e.pro_name){const t=i(e.pro_name);if(null!==t)return t;if(void 0!==e.short_name){const t=i(e.short_name);if(null!==t)return t}}return"en"!==e.language&&void 0!==e.local_description&&e.language===window.language||"en"===e.language&&void 0!==e.local_description&&e.language===window.language?e.local_description:e.description||""}}}]);